{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/AI_Projects/bp-cleaning-app/src/app/login/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { createClient } from '@/lib/supabase/client'\nimport { useRouter } from 'next/navigation'\nimport { Loader2 } from 'lucide-react'\nimport Image from 'next/image'\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n  const [mode, setMode] = useState<'login' | 'signup'>('login')\n  const [fullName, setFullName] = useState('')\n\n  const router = useRouter()\n  const supabase = createClient()\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setLoading(true)\n    setError('')\n\n    try {\n      if (mode === 'login') {\n        const { error } = await supabase.auth.signInWithPassword({\n          email,\n          password,\n        })\n        if (error) throw error\n        router.push('/')\n        router.refresh()\n      } else {\n        const { error } = await supabase.auth.signUp({\n          email,\n          password,\n          options: {\n            data: {\n              full_name: fullName,\n              role: 'user'\n            }\n          }\n        })\n        if (error) throw error\n        setError('Controlla la tua email per confermare la registrazione')\n        setMode('login')\n      }\n    } catch (err: any) {\n      setError(err.message || 'Si è verificato un errore')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col relative overflow-hidden\">\n      {/* Background gradient */}\n      <div className=\"absolute inset-0 gradient-water\" />\n\n      {/* Decorative elements */}\n      <div className=\"absolute top-0 right-0 w-64 h-64 opacity-10\">\n        <Image src=\"/logo.svg\" alt=\"\" fill className=\"object-contain\" />\n      </div>\n      <div className=\"absolute bottom-0 left-0 w-48 h-48 opacity-5 transform rotate-180\">\n        <Image src=\"/logo.svg\" alt=\"\" fill className=\"object-contain\" />\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 flex flex-col items-center justify-center px-5 py-8 relative z-10\">\n        {/* Logo area */}\n        <div className=\"mb-10 text-center\">\n          <div className=\"w-24 h-24 bg-white/15 backdrop-blur-md rounded-3xl flex items-center justify-center mx-auto mb-5 shadow-2xl border border-white/20\">\n            <Image src=\"/logo.svg\" alt=\"BP Cleaning\" width={56} height={56} />\n          </div>\n          <h1 className=\"text-3xl font-bold text-white mb-2\">BP Cleaning</h1>\n          <p className=\"text-sky-200 text-sm font-medium\">Gestione Magazzino</p>\n        </div>\n\n        {/* Login Card */}\n        <div className=\"w-full max-w-sm\">\n          <div className=\"bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-7 border border-white/50\">\n            <h2 className=\"text-xl font-bold text-gray-900 mb-6 text-center\">\n              {mode === 'login' ? 'Bentornato!' : 'Crea Account'}\n            </h2>\n\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              {mode === 'signup' && (\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">Nome completo</label>\n                  <input\n                    type=\"text\"\n                    value={fullName}\n                    onChange={(e) => setFullName(e.target.value)}\n                    className=\"input\"\n                    placeholder=\"Mario Rossi\"\n                    required\n                  />\n                </div>\n              )}\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">Email</label>\n                <input\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  className=\"input\"\n                  placeholder=\"nome@email.com\"\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">Password</label>\n                <input\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"input\"\n                  placeholder=\"••••••••\"\n                  required\n                  minLength={6}\n                />\n              </div>\n\n              {error && (\n                <div className={`text-sm p-3 rounded-xl ${\n                  error.includes('email') || error.includes('Controlla')\n                    ? 'bg-sky-50 text-sky-700 border border-sky-100'\n                    : 'bg-red-50 text-red-700 border border-red-100'\n                }`}>\n                  {error}\n                </div>\n              )}\n\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"btn btn-primary w-full py-3.5 text-base shadow-lg shadow-sky-500/30 hover:shadow-xl hover:shadow-sky-500/40\"\n              >\n                {loading ? (\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\n                ) : mode === 'login' ? (\n                  'Accedi'\n                ) : (\n                  'Registrati'\n                )}\n              </button>\n            </form>\n\n            <div className=\"mt-6 text-center\">\n              <button\n                onClick={() => {\n                  setMode(mode === 'login' ? 'signup' : 'login')\n                  setError('')\n                }}\n                className=\"text-sm text-sky-600 hover:text-sky-700 font-medium transition-colors\"\n              >\n                {mode === 'login'\n                  ? 'Non hai un account? Registrati'\n                  : 'Hai già un account? Accedi'}\n              </button>\n            </div>\n          </div>\n\n          {/* Footer */}\n          <p className=\"text-center text-sky-200/80 text-xs mt-8\">\n            © {new Date().getFullYear()} BP Cleaning\n          </p>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}