(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27639,e=>{"use strict";let t={detergente:"consumabile",sgrassatore:"consumabile",disinfettante:"consumabile",lucidante:"consumabile",deodorante:"consumabile",accessorio:"attrezzatura",attrezzatura:"attrezzatura",altro:"attrezzatura"};e.s(["CATEGORIES_BY_TYPE",0,{all:["detergente","sgrassatore","disinfettante","lucidante","deodorante","accessorio","attrezzatura","altro"],consumabile:["detergente","sgrassatore","disinfettante","lucidante","deodorante"],attrezzatura:["accessorio","attrezzatura","altro"]},"CATEGORY_ICONS",0,{detergente:"ðŸ§´",sgrassatore:"ðŸ’ª",disinfettante:"ðŸ§¹",lucidante:"âœ¨",deodorante:"ðŸŒ¸",accessorio:"ðŸ§¤",attrezzatura:"ðŸ› ï¸",altro:"ðŸ“¦"},"CATEGORY_LABELS",0,{detergente:"Detergente",sgrassatore:"Sgrassatore",disinfettante:"Disinfettante",lucidante:"Lucidante",deodorante:"Deodorante",accessorio:"Accessorio",attrezzatura:"Attrezzatura",altro:"Altro"},"STATUS_LABELS",0,{active:"Attivo",paused:"In pausa",completed:"Completato"},"UNIT_LABELS",0,{litri:"Litri",pezzi:"Pezzi",kg:"Kg",ml:"ml",rotoli:"Rotoli",confezioni:"Confezioni"},"filterProductsByType",0,(e,a)=>"all"===a?e:e.filter(e=>t[e.category]===a)])},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},88511,e=>{"use strict";let t=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],88511)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},78894,e=>{"use strict";let t=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},25652,35408,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>a],25652);let s=(0,t.default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);e.s(["TrendingDown",()=>s],35408)},50573,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(11795),i=e.i(59897),l=e.i(75157),d=e.i(27639),n=e.i(71689),c=e.i(88844);let o=(0,e.i(75254).default)("barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);var m=e.i(7486),x=e.i(87316),h=e.i(78894),u=e.i(25652),p=e.i(35408),g=e.i(88511),b=e.i(27612),f=e.i(78583),j=e.i(22016);function y(){let e,y=(0,s.useParams)(),v=(0,s.useRouter)(),{isSuperuser:N}=(0,i.useAuth)(),[k,w]=(0,a.useState)(null),[z,A]=(0,a.useState)(!0),[M,T]=(0,a.useState)(!1),_=(0,r.createClient)();(0,a.useEffect)(()=>{S()},[y.id]);let S=async()=>{let{data:e,error:t}=await _.from("products").select("*, supplier:suppliers(name)").eq("id",y.id).single();!t&&e&&w(e),A(!1)},C=async()=>{if(!k||!confirm(`Sei sicuro di voler eliminare "${k.name}"?`))return;T(!0);let{error:e}=await _.from("products").update({is_active:!1}).eq("id",k.id);e?(alert("Errore durante l'eliminazione"),T(!1)):v.push("/prodotti")};if(z)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})});if(!k)return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:[(0,t.jsx)(c.Package,{className:"w-16 h-16 text-gray-300 mb-4"}),(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Prodotto non trovato"}),(0,t.jsx)(j.default,{href:"/prodotti",className:"text-blue-600 hover:underline",children:"Torna ai prodotti"})]});let E=(e=k.current_stock/k.min_stock)<=1?{color:"text-red-500",bg:"bg-red-50 border-red-200",label:"RIORDINO URGENTE"}:e<=1.5?{color:"text-amber-500",bg:"bg-amber-50 border-amber-200",label:"SCORTA BASSA"}:{color:"text-emerald-500",bg:"bg-emerald-50 border-emerald-200",label:"DISPONIBILE"};return(0,t.jsxs)("div",{className:"min-h-screen pb-24",children:[(0,t.jsx)("header",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 text-white px-4 pt-12 pb-6 rounded-b-3xl",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)("button",{onClick:()=>v.back(),className:"p-2 -ml-2 hover:bg-white/10 rounded-xl transition-colors",children:(0,t.jsx)(n.ArrowLeft,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:"text-blue-100",children:"Dettaglio Prodotto"})]}),(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center text-3xl",children:d.CATEGORY_ICONS[k.category]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h1",{className:"text-xl font-bold truncate",children:k.name}),(0,t.jsx)("p",{className:"text-blue-100 text-sm",children:d.CATEGORY_LABELS[k.category]}),k.sku&&(0,t.jsx)("p",{className:"text-blue-200 text-xs font-mono mt-1",children:k.sku})]})]})]})}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 -mt-4 space-y-4",children:[(0,t.jsxs)("div",{className:(0,l.cn)("p-4 rounded-2xl border-2",E.bg),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Giacenza Attuale"}),(0,t.jsx)("p",{className:(0,l.cn)("text-3xl font-bold",E.color),children:(0,l.formatNumber)(k.current_stock,0)}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:k.unit})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("span",{className:(0,l.cn)("inline-block px-3 py-1 rounded-full text-xs font-semibold",E.color,E.bg),children:E.label}),k.current_stock<=k.min_stock&&(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-2 text-red-500",children:[(0,t.jsx)(h.AlertTriangle,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-xs",children:"Sotto soglia minima"})]})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[(0,t.jsxs)("span",{children:["Min: ",k.min_stock]}),(0,t.jsxs)("span",{children:["Target: ",2*k.min_stock]})]}),(0,t.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:(0,l.cn)("h-full rounded-full transition-all",k.current_stock<=k.min_stock?"bg-red-500":k.current_stock<=1.5*k.min_stock?"bg-amber-500":"bg-emerald-500"),style:{width:`${Math.min(k.current_stock/(2*k.min_stock)*100,100)}%`}})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"p-4 bg-white rounded-2xl border border-gray-100 shadow-sm",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Prezzo Unitario"}),(0,t.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(0,l.formatCurrency)(k.unit_cost)})]}),(0,t.jsxs)("div",{className:"p-4 bg-white rounded-2xl border border-gray-100 shadow-sm",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"QuantitÃ /Conf."}),(0,t.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:[k.quantity_per_package," ",k.unit]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm divide-y divide-gray-100",children:[k.barcode&&(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4",children:[(0,t.jsx)(o,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Barcode"}),(0,t.jsx)("p",{className:"font-mono text-gray-900",children:k.barcode})]})]}),k.supplier&&(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4",children:[(0,t.jsx)(m.Building2,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Fornitore"}),(0,t.jsx)("p",{className:"text-gray-900",children:k.supplier.name})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4",children:[(0,t.jsx)(x.Calendar,{className:"w-5 h-5 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Ultimo Aggiornamento"}),(0,t.jsx)("p",{className:"text-gray-900",children:(0,l.formatDate)(k.updated_at)})]})]})]}),k.notes&&(0,t.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(f.FileText,{className:"w-5 h-5 text-amber-600 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Note"}),(0,t.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:k.notes})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)(j.default,{href:`/movimenti/carico?product=${k.id}`,className:"flex items-center justify-center gap-2 p-4 bg-emerald-50 text-emerald-700 rounded-2xl border border-emerald-200 font-semibold hover:bg-emerald-100 transition-colors",children:[(0,t.jsx)(u.TrendingUp,{className:"w-5 h-5"}),"Carico"]}),(0,t.jsxs)(j.default,{href:`/movimenti/scarico?product=${k.id}`,className:"flex items-center justify-center gap-2 p-4 bg-red-50 text-red-700 rounded-2xl border border-red-200 font-semibold hover:bg-red-100 transition-colors",children:[(0,t.jsx)(p.TrendingDown,{className:"w-5 h-5"}),"Scarico"]})]}),N&&(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsxs)(j.default,{href:`/prodotti/${k.id}/modifica`,className:"flex-1 flex items-center justify-center gap-2 p-4 bg-blue-600 text-white rounded-2xl font-semibold hover:bg-blue-700 transition-colors",children:[(0,t.jsx)(g.Edit,{className:"w-5 h-5"}),"Modifica"]}),(0,t.jsx)("button",{onClick:C,disabled:M,className:"flex items-center justify-center gap-2 p-4 bg-gray-100 text-gray-700 rounded-2xl font-semibold hover:bg-red-100 hover:text-red-700 transition-colors disabled:opacity-50",children:(0,t.jsx)(b.Trash2,{className:"w-5 h-5"})})]})]})]})}e.s(["default",()=>y],50573)}]);