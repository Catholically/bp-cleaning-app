(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},27639,e=>{"use strict";e.s(["CATEGORY_ICONS",0,{detergente:"ðŸ§´",sgrassatore:"ðŸ’ª",disinfettante:"ðŸ§¹",lucidante:"âœ¨",deodorante:"ðŸŒ¸",accessorio:"ðŸ§¤",attrezzatura:"ðŸ› ï¸",altro:"ðŸ“¦"},"CATEGORY_LABELS",0,{detergente:"Detergente",sgrassatore:"Sgrassatore",disinfettante:"Disinfettante",lucidante:"Lucidante",deodorante:"Deodorante",accessorio:"Accessorio",attrezzatura:"Attrezzatura",altro:"Altro"}])},78854,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(11795),a=e.i(59897),l=e.i(75157),i=e.i(27639),n=e.i(55436),o=e.i(7233);let c=(0,e.i(75254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var d=e.i(88844),u=e.i(22016),x=e.i(18566);function m(){let{isSuperuser:e}=(0,a.useAuth)(),m=(0,x.useSearchParams)(),[h,b]=(0,r.useState)([]),[g,p]=(0,r.useState)(!0),[f,j]=(0,r.useState)(""),[y,N]=(0,r.useState)("low"===m.get("filter")),v=(0,s.createClient)();(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{await w()}finally{e&&p(!1)}})(),()=>{e=!1}},[]);let w=async()=>{let{data:e,error:t}=await v.from("products").select("*, supplier:suppliers(name)").eq("is_active",!0).order("category").order("name");!t&&e&&b(e)},k=(0,r.useMemo)(()=>h.filter(e=>{let t=!f||e.name.toLowerCase().includes(f.toLowerCase())||e.barcode?.toLowerCase().includes(f.toLowerCase()),r=!y||e.current_stock<=e.min_stock;return t&&r}),[h,f,y]);return g?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):(0,t.jsxs)("div",{className:"min-h-screen",children:[(0,t.jsx)("header",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 text-white px-4 pt-12 pb-6 rounded-b-3xl",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(d.Package,{className:"w-6 h-6"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold",children:"Prodotti"}),(0,t.jsxs)("p",{className:"text-blue-100 text-sm",children:[h.length," prodotti in magazzino"]})]})]})}),(0,t.jsxs)("div",{className:"px-4 -mt-4 space-y-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Cerca prodotto...",value:f,onChange:e=>j(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent pl-12"})]}),(0,t.jsxs)("button",{onClick:()=>N(!y),className:(0,l.cn)("flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all",y?"bg-red-100 text-red-700 border border-red-200":"bg-white text-gray-600 border border-gray-200"),children:[(0,t.jsx)(c,{className:"w-4 h-4"}),"Solo scorte basse"]})]}),(0,t.jsx)("div",{className:"px-4 mt-4 space-y-3 pb-6",children:0===k.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gray-100 flex items-center justify-center mb-4 text-gray-400",children:(0,t.jsx)(d.Package,{className:"w-8 h-8"})}),(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nessun prodotto trovato"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 max-w-sm",children:f?"Prova con una ricerca diversa":"Aggiungi il primo prodotto"})]}):k.map((e,r)=>{let s,a=(s=e.current_stock/e.min_stock)<=1?{color:"text-red-500",bg:"bg-red-50",label:"RIORDINO"}:s<=1.5?{color:"text-amber-500",bg:"bg-amber-50",label:"BASSO"}:{color:"text-emerald-500",bg:"bg-emerald-50",label:"OK"};return(0,t.jsxs)(u.default,{href:`/prodotti/${e.id}`,className:"flex items-center gap-4 p-4 bg-white rounded-2xl border border-gray-100 shadow-sm transition-all duration-200 hover:shadow-md hover:border-gray-200 animate-slide-up",style:{animationDelay:`${.03*r}s`},children:[(0,t.jsx)("div",{className:(0,l.cn)("list-item-icon",a.bg),children:(0,t.jsx)("span",{className:"text-xl",children:i.CATEGORY_ICONS[e.category]})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e.quantity_per_package,e.unit," â€¢ ",(0,l.formatCurrency)(e.unit_cost)]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:(0,l.cn)("text-lg font-bold",a.color),children:(0,l.formatNumber)(e.current_stock,0)}),e.current_stock<=e.min_stock?(0,t.jsx)("span",{className:"badge-danger text-[10px]",children:a.label}):(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"in stock"})]})]},e.id)})}),e&&(0,t.jsx)(u.default,{href:"/prodotti/nuovo",className:"fixed bottom-24 right-4 w-14 h-14 rounded-full bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-xl flex items-center justify-center z-50 hover:from-blue-700 hover:to-blue-800 active:scale-95 transition-all duration-200",children:(0,t.jsx)(o.Plus,{className:"w-6 h-6"})})]})}function h(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}),children:(0,t.jsx)(m,{})})}e.s(["default",()=>h],78854)}]);