(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,28480,e=>{"use strict";let s=(0,e.i(75254).default)("arrow-down-to-line",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);e.s(["ArrowDownToLine",()=>s],28480)},35956,e=>{"use strict";let s=(0,e.i(75254).default)("arrow-up-from-line",[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]]);e.s(["ArrowUpFromLine",()=>s],35956)},61911,e=>{"use strict";let s=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>s],61911)},46012,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(11795),r=e.i(75157),i=e.i(59897),l=e.i(91741),c=e.i(28480),n=e.i(35956),d=e.i(61911),o=e.i(22016);function m(){let[e,m]=(0,t.useState)([]),[x,h]=(0,t.useState)(!0),[p,u]=(0,t.useState)("all"),{user:g,isSuperuser:f}=(0,i.useAuth)(),j=(0,a.createClient)();(0,t.useEffect)(()=>{g&&y()},[g,f]);let y=async()=>{let e=j.from("movements").select(`
        *,
        product:products(name, unit),
        worksite:worksites(code, name),
        operator:profiles(full_name)
      `).order("created_at",{ascending:!1}).limit(100);!f&&g&&(e=e.eq("operator_id",g.id));let{data:s,error:t}=await e;!t&&s&&m(s),h(!1)},b=e.filter(e=>"all"===p||e.type===p),N=b.reduce((e,s)=>{let t=new Date(s.created_at).toLocaleDateString("it-IT",{weekday:"long",day:"numeric",month:"long"});return e[t]||(e[t]=[]),e[t].push(s),e},{});return x?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)("header",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 text-white px-4 pt-12 pb-6 rounded-b-3xl",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(l.ClipboardList,{className:"w-6 h-6"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold",children:"Movimenti"}),(0,s.jsxs)("p",{className:"text-blue-100 text-sm",children:[e.length," operazioni",f&&(0,s.jsxs)("span",{className:"ml-2 inline-flex items-center gap-1",children:[(0,s.jsx)(d.Users,{className:"w-3 h-3"})," tutti"]})]})]})]})}),(0,s.jsx)("div",{className:"px-4 -mt-4 mb-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)(o.default,{href:"/movimenti/carico",className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:(0,s.jsx)(c.ArrowDownToLine,{className:"w-5 h-5 text-emerald-600"})}),(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:"Carico"})]}),(0,s.jsxs)(o.default,{href:"/movimenti/scarico",className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:(0,s.jsx)(n.ArrowUpFromLine,{className:"w-5 h-5 text-orange-600"})}),(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:"Scarico"})]})]})}),(0,s.jsx)("div",{className:"px-4 mb-4",children:(0,s.jsx)("div",{className:"flex gap-2",children:["all","carico","scarico"].map(e=>(0,s.jsx)("button",{onClick:()=>u(e),className:(0,r.cn)("px-4 py-2 rounded-xl text-sm font-medium transition-all",p===e?"carico"===e?"bg-emerald-100 text-emerald-700":"scarico"===e?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:"all"===e?"Tutti":"carico"===e?"Carichi":"Scarichi"},e))})}),(0,s.jsxs)("div",{className:"px-4 space-y-6 pb-6",children:[Object.entries(N).map(([e,t])=>(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2 capitalize",children:e}),(0,s.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,s.jsxs)("div",{className:(0,r.cn)("list-item border-l-4","carico"===e.type?"border-l-emerald-500":"border-l-orange-500"),children:[(0,s.jsx)("div",{className:(0,r.cn)("list-item-icon","carico"===e.type?"bg-emerald-100":"bg-orange-100"),children:"carico"===e.type?(0,s.jsx)(c.ArrowDownToLine,{className:(0,r.cn)("w-5 h-5","text-emerald-600")}):(0,s.jsx)(n.ArrowUpFromLine,{className:(0,r.cn)("w-5 h-5","text-orange-600")})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 truncate",children:e.product?.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["carico"===e.type?"+":"-",e.quantity," pz","scarico"===e.type&&e.worksite&&(0,s.jsxs)(s.Fragment,{children:[" → ",e.worksite.code]})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:[e.operator?.full_name," • ",(0,r.formatDateTime)(e.created_at)]})]}),(0,s.jsxs)("span",{className:(0,r.cn)("font-bold","carico"===e.type?"text-emerald-600":"text-orange-600"),children:["carico"===e.type?"+":"-",(0,r.formatCurrency)(e.total_cost)]})]},e.id))})]},e)),0===b.length&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gray-100 flex items-center justify-center mb-4 text-gray-400",children:(0,s.jsx)(l.ClipboardList,{className:"w-8 h-8"})}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nessun movimento"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 max-w-sm",children:"I movimenti di magazzino appariranno qui"})]})]})]})}e.s(["default",()=>m])}]);