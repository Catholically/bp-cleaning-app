(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},28480,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-down-to-line",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);e.s(["ArrowDownToLine",()=>t],28480)},43531,e=>{"use strict";let t=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},99023,e=>{"use strict";let t=(0,e.i(75254).default)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);e.s(["Minus",()=>t],99023)},12589,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(11795),a=e.i(59897),l=e.i(75157),i=e.i(28480),n=e.i(55436),c=e.i(99023),o=e.i(7233),d=e.i(43531),m=e.i(31278),x=e.i(18566);function u(){let{user:e}=(0,a.useAuth)(),u=(0,x.useRouter)(),h=(0,x.useSearchParams)().get("product"),[f,p]=(0,s.useState)([]),[g,b]=(0,s.useState)(!0),[j,y]=(0,s.useState)(""),[N,w]=(0,s.useState)(null),[v,C]=(0,s.useState)(1),[k,S]=(0,s.useState)(!1),[M,_]=(0,s.useState)(!1),[L,T]=(0,s.useState)(null),A=(0,r.createClient)();(0,s.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await z();if(h&&t&&e){let e=t.find(e=>e.id===h);e&&w(e)}}finally{e&&b(!1)}})(),()=>{e=!1}},[h]);let z=async()=>{let{data:e}=await A.from("products").select("*").eq("is_active",!0).order("name");return e&&p(e),e},P=f.filter(e=>e.name.toLowerCase().includes(j.toLowerCase())||e.barcode?.toLowerCase().includes(j.toLowerCase())),D=async()=>{if(N&&e){S(!0);try{let{error:t}=await A.from("movements").insert({type:"carico",product_id:N.id,quantity:v,unit_cost_at_time:N.unit_cost,operator_id:e.id});if(t)throw t;T({product:N.name,quantity:v,total:v*N.unit_cost,newStock:N.current_stock+v}),_(!0),w(null),C(1),y("")}catch(e){console.error("Error:",e),alert("Errore durante il carico")}finally{S(!1)}}};return g?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin"})}):M&&L?(0,t.jsxs)("div",{className:"min-h-screen",children:[(0,t.jsx)("header",{className:"bg-gradient-to-r from-emerald-500 via-emerald-600 to-teal-600 text-white px-4 pt-12 pb-6 rounded-b-3xl",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(i.ArrowDownToLine,{className:"w-6 h-6"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold",children:"Carico Merce"}),(0,t.jsx)("p",{className:"text-emerald-100 text-sm",children:"Operazione completata"})]})]})}),(0,t.jsx)("div",{className:"px-4 -mt-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-8 text-center",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(d.Check,{className:"w-10 h-10 text-emerald-600"})}),(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Carico Registrato!"}),(0,t.jsxs)("p",{className:"text-gray-600 mb-4",children:["+",L.quantity,"x ",L.product]}),(0,t.jsxs)("p",{className:"text-lg text-gray-700",children:["Nuova giacenza: ",(0,t.jsx)("span",{className:"font-bold text-emerald-600",children:L.newStock})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-emerald-600 mt-2",children:(0,l.formatCurrency)(L.total)}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 mt-6",children:[(0,t.jsx)("button",{onClick:()=>{_(!1),T(null),z()},className:"inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl font-semibold text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-emerald-500 to-emerald-600 text-white hover:from-emerald-600 hover:to-emerald-700 focus:ring-emerald-500 shadow-md hover:shadow-lg active:scale-[0.98] w-full",children:"Nuovo Carico"}),(0,t.jsx)("button",{onClick:()=>u.push("/movimenti"),className:"inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl font-semibold text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 border-2 border-gray-200 bg-white text-gray-700 hover:border-gray-300 hover:bg-gray-50 focus:ring-gray-500 w-full",children:"Torna ai Movimenti"})]})]})})]}):N?(0,t.jsxs)("div",{className:"min-h-screen",children:[(0,t.jsx)("header",{className:"bg-gradient-to-r from-emerald-500 via-emerald-600 to-teal-600 text-white px-4 pt-12 pb-6 rounded-b-3xl",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(i.ArrowDownToLine,{className:"w-6 h-6"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold",children:"Carico Merce"}),(0,t.jsx)("p",{className:"text-emerald-100 text-sm truncate",children:N.name})]})]})}),(0,t.jsxs)("div",{className:"px-4 -mt-4 space-y-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Prodotto"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center text-2xl",children:"ðŸ§´"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:N.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,l.formatCurrency)(N.unit_cost),"/pz â€¢ Giacenza attuale: ",(0,l.formatNumber)(N.current_stock,0)]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-4",children:"QuantitÃ  da Caricare"}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,t.jsx)("button",{onClick:()=>C(Math.max(1,v-1)),className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl font-bold transition-all duration-200 active:scale-95 bg-red-100 text-red-600 hover:bg-red-200",children:(0,t.jsx)(c.Minus,{className:"w-6 h-6"})}),(0,t.jsx)("span",{className:"text-5xl font-bold text-gray-900 w-20 text-center",children:v}),(0,t.jsx)("button",{onClick:()=>C(v+1),className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl font-bold transition-all duration-200 active:scale-95 bg-emerald-100 text-emerald-600 hover:bg-emerald-200",children:(0,t.jsx)(o.Plus,{className:"w-6 h-6"})})]}),(0,t.jsx)("div",{className:"mt-4 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Valore: ",(0,t.jsx)("span",{className:"font-semibold text-emerald-600",children:(0,l.formatCurrency)(v*N.unit_cost)})]})})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,t.jsx)("button",{onClick:()=>{w(null),C(1)},className:"inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl font-semibold text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed border-2 border-gray-200 bg-white text-gray-700 hover:border-gray-300 hover:bg-gray-50 focus:ring-gray-500 flex-1",children:"Annulla"}),(0,t.jsx)("button",{onClick:D,disabled:k,className:"inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl font-semibold text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-emerald-500 to-emerald-600 text-white hover:from-emerald-600 hover:to-emerald-700 focus:ring-emerald-500 shadow-md hover:shadow-lg active:scale-[0.98] flex-1",children:k?(0,t.jsx)(m.Loader2,{className:"w-5 h-5 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Check,{className:"w-5 h-5"}),"Conferma"]})})]})]})]}):(0,t.jsxs)("div",{className:"min-h-screen",children:[(0,t.jsx)("header",{className:"bg-gradient-to-r from-emerald-500 via-emerald-600 to-teal-600 text-white px-4 pt-12 pb-6 rounded-b-3xl",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(i.ArrowDownToLine,{className:"w-6 h-6"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold",children:"Carico Merce"}),(0,t.jsx)("p",{className:"text-emerald-100 text-sm",children:"Seleziona prodotto"})]})]})}),(0,t.jsxs)("div",{className:"px-4 -mt-4 space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Cerca prodotto...",value:j,onChange:e=>y(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent pl-12"})]}),(0,t.jsx)("div",{className:"space-y-2",children:P.map(e=>(0,t.jsxs)("button",{onClick:()=>w(e),className:"flex items-center gap-4 p-4 bg-white rounded-2xl border border-gray-100 shadow-sm transition-all duration-200 hover:shadow-md hover:border-gray-200 w-full text-left",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl bg-emerald-100",children:"ðŸ§´"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 truncate",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,l.formatCurrency)(e.unit_cost),"/pz"]})]}),(0,t.jsx)("span",{className:"font-bold text-gray-900",children:(0,l.formatNumber)(e.current_stock,0)})]},e.id))})]})]})}function h(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-8 h-8 border-4 border-emerald-600 border-t-transparent rounded-full animate-spin"})}),children:(0,t.jsx)(u,{})})}e.s(["default",()=>h])}]);