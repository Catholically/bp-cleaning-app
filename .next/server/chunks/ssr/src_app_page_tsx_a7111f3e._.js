module.exports=[40777,a=>{"use strict";var b=a.i(87924),c=a.i(64696),d=a.i(72131),e=a.i(95445),f=a.i(68114),g=a.i(89275),h=a.i(71987),i=a.i(67900),j=a.i(7484),k=a.i(55488),l=a.i(50522),m=a.i(73570),n=a.i(70106);let o=(0,n.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),p=(0,n.default)("euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]),q=(0,n.default)("boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]),r=(0,n.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var s=a.i(15618);let t=(0,n.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var u=a.i(38246);function v(){let a,{profile:n,isSuperuser:v}=(0,c.useAuth)(),[w,x]=(0,d.useState)(null),[y,z]=(0,d.useState)([]),[A,B]=(0,d.useState)(!0),C=(0,e.createClient)();(0,d.useEffect)(()=>{D()},[]);let D=async()=>{try{let{data:a}=await C.from("products").select("current_stock, unit_cost, min_stock, name, unit, id").eq("is_active",!0),{count:b}=await C.from("worksites").select("*",{count:"exact",head:!0}).eq("status","active"),c=new Date;c.setHours(0,0,0,0);let{count:d}=await C.from("movements").select("*",{count:"exact",head:!0}).gte("created_at",c.toISOString()),e=new Date;e.setDate(1),e.setHours(0,0,0,0);let{data:f}=await C.from("movements").select("total_cost").eq("type","scarico").gte("created_at",e.toISOString()),{data:g}=await C.from("movements").select(`
          id, type, quantity, created_at,
          products(name),
          worksites(name),
          profiles:operator_id(full_name)
        `).order("created_at",{ascending:!1}).limit(5),h=a?.reduce((a,b)=>a+b.current_stock*b.unit_cost,0)||0,i=a?.filter(a=>a.current_stock<=a.min_stock)||[],j=f?.reduce((a,b)=>a+(b.total_cost||0),0)||0,k=(g||[]).map(a=>({id:a.id,type:a.type,product_name:a.products?.name||"Prodotto",quantity:a.quantity,worksite_name:a.worksites?.name,operator_name:a.profiles?.full_name,created_at:a.created_at}));x({totalProducts:a?.length||0,totalStockValue:h,lowStockCount:i.length,activeWorksites:b||0,todayMovements:d||0,monthlySpend:j,recentMovements:k}),z(i.slice(0,3).map(a=>({id:a.id,name:a.name,current_stock:a.current_stock,min_stock:a.min_stock,unit:a.unit})))}catch(a){console.error("Error fetching dashboard:",a)}finally{B(!1)}};return A?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 to-cyan-50",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)(h.default,{src:"/logo.svg",alt:"BP Cleaning",width:64,height:64,className:"animate-pulse-soft"}),(0,b.jsx)("div",{className:"w-8 h-1 bg-sky-200 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-sky-500 rounded-full animate-pulse",style:{width:"50%"}})})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-24",children:[(0,b.jsxs)("header",{className:"relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 gradient-water"}),(0,b.jsx)("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"url(/logo.svg)",backgroundRepeat:"no-repeat",backgroundPosition:"right -20px top -20px",backgroundSize:"180px"}}),(0,b.jsxs)("div",{className:"relative px-5 pt-14 pb-8 max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center shadow-lg",children:(0,b.jsx)(h.default,{src:"/logo.svg",alt:"BP Cleaning",width:32,height:32})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-white",children:"BP Cleaning"}),(0,b.jsx)("p",{className:"text-sky-100 text-sm",children:"Gestione Magazzino"})]}),v&&(0,b.jsx)("span",{className:"ml-auto px-3 py-1 rounded-full text-xs font-semibold bg-white/20 text-white backdrop-blur-sm",children:"Admin"})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("p",{className:"text-sky-100 text-sm",children:[(a=new Date().getHours())<12?"Buongiorno":a<18?"Buon pomeriggio":"Buonasera",","]}),(0,b.jsx)("p",{className:"text-white text-2xl font-bold",children:n?.full_name?.split(" ")[0]||"Utente"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)(p,{className:"w-4 h-4 text-sky-200"}),(0,b.jsx)("span",{className:"text-sky-200 text-xs font-medium",children:"Valore Stock"})]}),(0,b.jsx)("p",{className:"text-white text-2xl font-bold number-animate",children:(0,f.formatCurrency)(w?.totalStockValue||0)})]}),(0,b.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)(o,{className:"w-4 h-4 text-sky-200"}),(0,b.jsxs)("span",{className:"text-sky-200 text-xs font-medium",children:["Spesa ",new Date().toLocaleDateString("it-IT",{month:"long"}).charAt(0).toUpperCase()+new Date().toLocaleDateString("it-IT",{month:"long"}).slice(1)]})]}),(0,b.jsx)("p",{className:"text-white text-2xl font-bold number-animate",children:(0,f.formatCurrency)(w?.monthlySpend||0)})]})]})]})]}),(0,b.jsx)("div",{className:"px-5 -mt-2 max-w-4xl mx-auto",children:(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-2 lg:gap-3",children:[(0,b.jsxs)(u.default,{href:"/prodotti",className:"stat-card text-center animate-slide-up hover:shadow-md hover:scale-[1.02] transition-all",style:{animationDelay:"0.05s"},children:[(0,b.jsx)(q,{className:"w-5 h-5 text-sky-500 mx-auto mb-1"}),(0,b.jsx)("p",{className:"text-xl font-bold text-gray-900",children:w?.totalProducts||0}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Prodotti"})]}),(0,b.jsxs)(u.default,{href:"/cantieri",className:"stat-card text-center animate-slide-up hover:shadow-md hover:scale-[1.02] transition-all",style:{animationDelay:"0.1s"},children:[(0,b.jsx)(i.Building2,{className:"w-5 h-5 text-violet-500 mx-auto mb-1"}),(0,b.jsx)("p",{className:"text-xl font-bold text-gray-900",children:w?.activeWorksites||0}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Cantieri"})]}),(0,b.jsxs)(u.default,{href:"/movimenti",className:"stat-card text-center animate-slide-up hover:shadow-md hover:scale-[1.02] transition-all",style:{animationDelay:"0.15s"},children:[(0,b.jsx)(r,{className:"w-5 h-5 text-emerald-500 mx-auto mb-1"}),(0,b.jsx)("p",{className:"text-xl font-bold text-gray-900",children:w?.todayMovements||0}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Oggi"})]}),(0,b.jsxs)(u.default,{href:"/prodotti?filter=low",className:"stat-card text-center animate-slide-up hover:shadow-md hover:scale-[1.02] transition-all",style:{animationDelay:"0.2s"},children:[(0,b.jsx)(m.AlertTriangle,{className:`w-5 h-5 mx-auto mb-1 ${(w?.lowStockCount||0)>0?"text-red-500":"text-gray-300"}`}),(0,b.jsx)("p",{className:`text-xl font-bold ${(w?.lowStockCount||0)>0?"text-red-500":"text-gray-900"}`,children:w?.lowStockCount||0}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Riordino"})]})]})}),(0,b.jsx)("div",{className:"px-5 mt-6 max-w-4xl mx-auto",children:(0,b.jsxs)("div",{className:`grid gap-3 ${v?"grid-cols-2 lg:grid-cols-4":"grid-cols-2"}`,children:[(0,b.jsxs)(u.default,{href:"/movimenti/carico",className:"action-card flex items-center gap-3 animate-slide-up",style:{animationDelay:"0.25s"},children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-400 to-emerald-600 flex items-center justify-center shadow-lg shadow-emerald-500/20",children:(0,b.jsx)(j.ArrowDownToLine,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:"Carico"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Arrivo merce"})]})]}),(0,b.jsxs)(u.default,{href:"/movimenti/scarico",className:"action-card flex items-center gap-3 animate-slide-up",style:{animationDelay:"0.3s"},children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center shadow-lg shadow-orange-500/20",children:(0,b.jsx)(k.ArrowUpFromLine,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:"Scarico"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Per cantiere"})]})]}),v&&(0,b.jsxs)(u.default,{href:"/prodotti/nuovo",className:"action-card flex items-center gap-3 animate-slide-up",style:{animationDelay:"0.35s"},children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-sky-400 to-sky-600 flex items-center justify-center shadow-lg shadow-sky-500/20",children:(0,b.jsx)(s.Plus,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:"Prodotto"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Aggiungi nuovo"})]})]}),v&&(0,b.jsxs)(u.default,{href:"/cantieri/nuovo",className:"action-card flex items-center gap-3 animate-slide-up",style:{animationDelay:"0.4s"},children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-400 to-violet-600 flex items-center justify-center shadow-lg shadow-violet-500/20",children:(0,b.jsx)(s.Plus,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:"Cantiere"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Aggiungi nuovo"})]})]})]})}),y.length>0&&(0,b.jsxs)("div",{className:"px-5 mt-6 max-w-4xl mx-auto animate-slide-up",style:{animationDelay:"0.45s"},children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),(0,b.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"Scorte Basse"})]}),(0,b.jsx)(u.default,{href:"/prodotti?filter=low",className:"text-xs text-sky-600 font-medium",children:"Vedi tutti"})]}),(0,b.jsx)("div",{className:"bg-white rounded-2xl border border-red-100 shadow-sm overflow-hidden",children:y.map((a,c)=>(0,b.jsxs)(u.default,{href:`/prodotti/${a.id}`,className:`flex items-center gap-3 p-3 hover:bg-red-50 transition-colors ${c!==y.length-1?"border-b border-gray-100":""}`,children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-red-100 flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(m.AlertTriangle,{className:"w-4 h-4 text-red-500"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 text-sm truncate",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[(0,f.formatNumber)(a.current_stock)," / ",(0,f.formatNumber)(a.min_stock)," ",a.unit]})]}),(0,b.jsx)(l.ChevronRight,{className:"w-4 h-4 text-gray-300"})]},a.id))})]}),w?.recentMovements&&w.recentMovements.length>0&&(0,b.jsxs)("div",{className:"px-5 mt-6 mb-6 max-w-4xl mx-auto animate-slide-up",style:{animationDelay:"0.5s"},children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"Attività Recente"}),(0,b.jsx)(u.default,{href:"/movimenti",className:"text-xs text-sky-600 font-medium",children:"Storico"})]}),(0,b.jsx)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:w.recentMovements.map((a,c)=>{let d,e,f,g;return(0,b.jsxs)("div",{className:`flex items-center gap-3 p-3 ${c!==w.recentMovements.length-1?"border-b border-gray-100":""}`,children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${"carico"===a.type?"bg-emerald-100":"bg-orange-100"}`,children:"carico"===a.type?(0,b.jsx)(j.ArrowDownToLine,{className:"w-4 h-4 text-emerald-600"}):(0,b.jsx)(k.ArrowUpFromLine,{className:"w-4 h-4 text-orange-600"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 text-sm truncate",children:a.product_name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["carico"===a.type?"+":"-",a.quantity,a.worksite_name&&` • ${a.worksite_name}`,a.operator_name&&` • ${a.operator_name}`]})]}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:(d=new Date(a.created_at),g=Math.floor((f=Math.floor((e=Math.floor((new Date().getTime()-d.getTime())/6e4))/60))/24),e<1?"ora":e<60?`${e}min fa`:f<24?`${f}h fa`:`${g}g fa`)})]},a.id)})})]}),v&&(0,b.jsx)("div",{className:"px-5 mb-6 max-w-4xl mx-auto animate-slide-up",style:{animationDelay:"0.55s"},children:(0,b.jsxs)(u.default,{href:"/report",className:"flex items-center gap-4 p-4 bg-gradient-to-r from-gray-800 to-gray-900 rounded-2xl shadow-lg",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center",children:(0,b.jsx)(t,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-white",children:"Report & Analytics"}),(0,b.jsx)("p",{className:"text-sm text-gray-400",children:"Esporta dati in Excel"})]}),(0,b.jsx)(l.ChevronRight,{className:"w-5 h-5 text-gray-400"})]})}),(0,b.jsx)(g.BottomNav,{})]})}var w=a.i(24987),x=a.i(11300);function y(){let a,{profile:f}=(0,c.useAuth)(),[j,m]=(0,d.useState)([]),[n,o]=(0,d.useState)([]),[p,q]=(0,d.useState)(0),[s,t]=(0,d.useState)(!0),v=(0,e.createClient)();(0,d.useEffect)(()=>{y()},[]);let y=async()=>{try{let{data:a}=await v.from("worksites").select("id, code, name, address, city, client_name").eq("status","active").order("name"),{data:b}=await v.from("movements").select(`
          id, type, quantity, created_at,
          products(name),
          worksites(name)
        `).eq("operator_id",f?.id).order("created_at",{ascending:!1}).limit(5),c=new Date;c.setHours(0,0,0,0);let{count:d}=await v.from("movements").select("*",{count:"exact",head:!0}).eq("operator_id",f?.id).gte("created_at",c.toISOString());m(a||[]),o((b||[]).map(a=>({id:a.id,type:a.type,product_name:a.products?.name||"Prodotto",quantity:a.quantity,worksite_name:a.worksites?.name,created_at:a.created_at}))),q(d||0)}catch(a){console.error("Error fetching data:",a)}finally{t(!1)}};return s?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 to-cyan-50",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)(h.default,{src:"/logo.svg",alt:"BP Cleaning",width:64,height:64,className:"animate-pulse-soft"}),(0,b.jsx)("div",{className:"w-8 h-1 bg-sky-200 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-sky-500 rounded-full animate-pulse",style:{width:"50%"}})})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-24",children:[(0,b.jsxs)("header",{className:"relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500 to-teal-600"}),(0,b.jsx)("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"url(/logo.svg)",backgroundRepeat:"no-repeat",backgroundPosition:"right -20px top -20px",backgroundSize:"180px"}}),(0,b.jsxs)("div",{className:"relative px-5 pt-14 pb-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center shadow-lg",children:(0,b.jsx)(h.default,{src:"/logo.svg",alt:"BP Cleaning",width:32,height:32})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-white",children:"BP Cleaning"}),(0,b.jsx)("p",{className:"text-emerald-100 text-sm",children:"Area Operatore"})]})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("p",{className:"text-emerald-100 text-sm",children:[(a=new Date().getHours())<12?"Buongiorno":a<18?"Buon pomeriggio":"Buonasera",","]}),(0,b.jsx)("p",{className:"text-white text-2xl font-bold",children:f?.full_name?.split(" ")[0]||"Operatore"})]}),(0,b.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-emerald-100 text-xs font-medium",children:"Movimenti Oggi"}),(0,b.jsx)("p",{className:"text-white text-3xl font-bold",children:p})]}),(0,b.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,b.jsx)(r,{className:"w-6 h-6 text-white"})})]})})]})]}),(0,b.jsx)("div",{className:"px-5 -mt-4",children:(0,b.jsxs)(u.default,{href:"/movimenti/scarico",className:"flex items-center gap-4 p-5 bg-gradient-to-r from-orange-500 to-orange-600 rounded-2xl shadow-lg shadow-orange-500/30 animate-slide-up",children:[(0,b.jsx)("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:(0,b.jsx)(k.ArrowUpFromLine,{className:"w-7 h-7 text-white"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-bold text-white text-lg",children:"Scarico Merce"}),(0,b.jsx)("p",{className:"text-orange-100 text-sm",children:"Consegna prodotti al cantiere"})]}),(0,b.jsx)(l.ChevronRight,{className:"w-6 h-6 text-white/70"})]})}),(0,b.jsxs)("div",{className:"px-5 mt-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"Cantieri Attivi"}),(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:[j.length," cantieri"]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[j.slice(0,4).map((a,c)=>(0,b.jsxs)(u.default,{href:`/movimenti/scarico?cantiere=${a.code}`,className:"flex items-center gap-3 p-4 bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-all animate-slide-up",style:{animationDelay:`${.1+.05*c}s`},children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-violet-100 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(i.Building2,{className:"w-5 h-5 text-violet-600"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900 truncate",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,b.jsx)(w.MapPin,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"truncate",children:a.city})]})]}),(0,b.jsx)("span",{className:"text-xs font-medium text-gray-400 bg-gray-100 px-2 py-1 rounded-lg",children:a.code})]},a.id)),j.length>4&&(0,b.jsxs)(u.default,{href:"/cantieri",className:"flex items-center justify-center gap-2 p-3 text-sm text-sky-600 font-medium hover:bg-sky-50 rounded-xl transition-colors",children:["Vedi tutti i cantieri",(0,b.jsx)(l.ChevronRight,{className:"w-4 h-4"})]})]})]}),n.length>0&&(0,b.jsxs)("div",{className:"px-5 mt-6 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"I Miei Movimenti"}),(0,b.jsx)(u.default,{href:"/movimenti",className:"text-xs text-sky-600 font-medium",children:"Storico"})]}),(0,b.jsx)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:n.map((a,c)=>{let d,e,f,g;return(0,b.jsxs)("div",{className:`flex items-center gap-3 p-3 ${c!==n.length-1?"border-b border-gray-100":""}`,children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${"carico"===a.type?"bg-emerald-100":"bg-orange-100"}`,children:(0,b.jsx)(k.ArrowUpFromLine,{className:`w-4 h-4 ${"carico"===a.type?"text-emerald-600 rotate-180":"text-orange-600"}`})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 text-sm truncate",children:a.product_name}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["scarico"===a.type?"-":"+",a.quantity," ",a.worksite_name&&`• ${a.worksite_name}`]})]}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:(d=new Date(a.created_at),g=Math.floor((f=Math.floor((e=Math.floor((new Date().getTime()-d.getTime())/6e4))/60))/24),e<1?"ora":e<60?`${e}min fa`:f<24?`${f}h fa`:`${g}g fa`)})]},a.id)})})]}),0===n.length&&(0,b.jsx)("div",{className:"px-5 mt-6 mb-6",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-8 text-center",children:[(0,b.jsx)(x.ClipboardList,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-gray-500 font-medium",children:"Nessun movimento recente"}),(0,b.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Inizia a scaricare prodotti ai cantieri"})]})}),(0,b.jsx)(g.BottomNav,{})]})}function z(){let{isSuperuser:a,loading:d}=(0,c.useAuth)();return d?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 to-cyan-50",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)(h.default,{src:"/logo.svg",alt:"BP Cleaning",width:64,height:64,className:"animate-pulse-soft"})}),(0,b.jsx)("div",{className:"w-8 h-1 bg-sky-200 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-sky-500 rounded-full animate-pulse",style:{width:"50%"}})})]})}):a?(0,b.jsx)(v,{}):(0,b.jsx)(y,{})}a.s(["default",()=>z],40777)}];

//# sourceMappingURL=src_app_page_tsx_a7111f3e._.js.map