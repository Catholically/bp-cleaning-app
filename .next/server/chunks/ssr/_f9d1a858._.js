module.exports=[7484,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-down-to-line",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);a.s(["ArrowDownToLine",()=>b],7484)},55488,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-up-from-line",[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]]);a.s(["ArrowUpFromLine",()=>b],55488)},60246,a=>{"use strict";let b=(0,a.i(70106).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["Users",()=>b],60246)},21886,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(95445),e=a.i(68114),f=a.i(64696),g=a.i(11300),h=a.i(7484),i=a.i(55488),j=a.i(60246),k=a.i(38246);function l(){let[a,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)("all"),{user:q,isSuperuser:r}=(0,f.useAuth)(),s=(0,d.createClient)();(0,c.useEffect)(()=>{q&&t()},[q,r]);let t=async()=>{let a=s.from("movements").select(`
        *,
        product:products(name, unit),
        worksite:worksites(code, name),
        operator:profiles(full_name)
      `).order("created_at",{ascending:!1}).limit(100);!r&&q&&(a=a.eq("operator_id",q.id));let{data:b,error:c}=await a;!c&&b&&l(b),n(!1)},u=a.filter(a=>"all"===o||a.type===o),v=u.reduce((a,b)=>{let c=new Date(b.created_at).toLocaleDateString("it-IT",{weekday:"long",day:"numeric",month:"long"});return a[c]||(a[c]=[]),a[c].push(b),a},{});return m?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):(0,b.jsxs)("div",{className:"min-h-screen",children:[(0,b.jsx)("header",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 text-white px-4 pt-12 pb-6 rounded-b-3xl",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(g.ClipboardList,{className:"w-6 h-6"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold",children:"Movimenti"}),(0,b.jsxs)("p",{className:"text-blue-100 text-sm",children:[a.length," operazioni",r&&(0,b.jsxs)("span",{className:"ml-2 inline-flex items-center gap-1",children:[(0,b.jsx)(j.Users,{className:"w-3 h-3"})," tutti"]})]})]})]})}),(0,b.jsx)("div",{className:"px-4 -mt-4 mb-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)(k.default,{href:"/movimenti/carico",className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:(0,b.jsx)(h.ArrowDownToLine,{className:"w-5 h-5 text-emerald-600"})}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:"Carico"})]}),(0,b.jsxs)(k.default,{href:"/movimenti/scarico",className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:(0,b.jsx)(i.ArrowUpFromLine,{className:"w-5 h-5 text-orange-600"})}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:"Scarico"})]})]})}),(0,b.jsx)("div",{className:"px-4 mb-4",children:(0,b.jsx)("div",{className:"flex gap-2",children:["all","carico","scarico"].map(a=>(0,b.jsx)("button",{onClick:()=>p(a),className:(0,e.cn)("px-4 py-2 rounded-xl text-sm font-medium transition-all",o===a?"carico"===a?"bg-emerald-100 text-emerald-700":"scarico"===a?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:"all"===a?"Tutti":"carico"===a?"Carichi":"Scarichi"},a))})}),(0,b.jsxs)("div",{className:"px-4 space-y-6 pb-6",children:[Object.entries(v).map(([a,c])=>(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2 capitalize",children:a}),(0,b.jsx)("div",{className:"space-y-2",children:c.map(a=>(0,b.jsxs)("div",{className:(0,e.cn)("list-item border-l-4","carico"===a.type?"border-l-emerald-500":"border-l-orange-500"),children:[(0,b.jsx)("div",{className:(0,e.cn)("list-item-icon","carico"===a.type?"bg-emerald-100":"bg-orange-100"),children:"carico"===a.type?(0,b.jsx)(h.ArrowDownToLine,{className:(0,e.cn)("w-5 h-5","text-emerald-600")}):(0,b.jsx)(i.ArrowUpFromLine,{className:(0,e.cn)("w-5 h-5","text-orange-600")})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-900 truncate",children:a.product?.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["carico"===a.type?"+":"-",a.quantity," pz","scarico"===a.type&&a.worksite&&(0,b.jsxs)(b.Fragment,{children:[" → ",a.worksite.code]})]}),(0,b.jsxs)("p",{className:"text-xs text-gray-400",children:[a.operator?.full_name," • ",(0,e.formatDateTime)(a.created_at)]})]}),(0,b.jsxs)("span",{className:(0,e.cn)("font-bold","carico"===a.type?"text-emerald-600":"text-orange-600"),children:["carico"===a.type?"+":"-",(0,e.formatCurrency)(a.total_cost)]})]},a.id))})]},a)),0===u.length&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gray-100 flex items-center justify-center mb-4 text-gray-400",children:(0,b.jsx)(g.ClipboardList,{className:"w-8 h-8"})}),(0,b.jsx)("p",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nessun movimento"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 max-w-sm",children:"I movimenti di magazzino appariranno qui"})]})]})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=_f9d1a858._.js.map