module.exports=[11335,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(95445),e=a.i(64696),f=a.i(68114),g=a.i(39726),h=a.i(55488),i=a.i(13513),j=a.i(87532),k=a.i(23025),l=a.i(15618),m=a.i(33441),n=a.i(33508),o=a.i(5784),p=a.i(67552),q=a.i(13749),r=a.i(96221),s=a.i(66384),t=a.i(83497),u=a.i(8406),v=a.i(79808),w=a.i(47591),x=a.i(38246),y=a.i(50944);a.i(6051);var z=a.i(22909),A=a.i(49623),B=a.i(91345),C=a.i(38626);function D(){let a,{user:D,profile:E,isManager:F,loading:G}=(0,e.useAuth)(),H=(0,y.useRouter)(),I=(0,y.useSearchParams)(),J=I.get("product"),K=I.get("cantiere"),L="movimenti"===I.get("from"),[M,N]=(0,c.useState)([]),[O,P]=(0,c.useState)([]),[Q,R]=(0,c.useState)([]),[S,T]=(0,c.useState)(!0),[U,V]=(0,c.useState)(""),[W,X]=(0,c.useState)("all"),[Y,Z]=(0,c.useState)(null),[$,_]=(0,c.useState)(null),[aa,ab]=(0,c.useState)(null),[ac,ad]=(0,c.useState)(null),[ae,af]=(0,c.useState)(1),[ag,ah]=(0,c.useState)(new Date().toISOString().split("T")[0]),[ai,aj]=(0,c.useState)(!1),[ak,al]=(0,c.useState)(!1),[am,an]=(0,c.useState)(null),[ao,ap]=(0,c.useState)(!1),[aq,ar]=(0,c.useState)(!1),[as,at]=(0,c.useState)(null),au=(0,c.useRef)(null),av=(0,c.useRef)(null),aw=(0,d.createClient)(),[ax,ay]=(0,c.useState)(null),az=(0,C.useIsMobile)(),aA=(0,c.useCallback)(a=>{let b=M.find(b=>b.barcode===a);b?(ab(b),ay(a),setTimeout(()=>ay(null),2e3)):(at(`Prodotto non trovato: ${a}`),setTimeout(()=>at(null),3e3))},[M]);(0,C.useBarcodeScanner)({onScan:aA,enabled:!aa&&!aq&&M.length>0&&!az,minLength:5}),(0,c.useEffect)(()=>{!G&&F&&H.replace("/")},[F,G,H]),(0,c.useEffect)(()=>{if(F)return;let a=!0;return(async()=>{try{let{products:b,worksites:c,recentProducts:d}=await aB();if(J&&b&&a){let a=b.find(a=>a.id===J);a&&ab(a)}if(K&&c&&a){let a=c.find(a=>a.id===K);a&&ad(a)}}finally{a&&T(!1)}})(),()=>{a=!1,aH()}},[J,K,D?.id,F]);let aB=async()=>{let[a,b]=await Promise.all([aw.from("products").select("*").eq("is_active",!0).order("name"),aw.from("worksites").select("*").eq("status","active").order("code")]);a.data&&N(a.data),b.data&&R(b.data);let c=[];if(D?.id&&a.data){let b=new Date;b.setDate(b.getDate()-30);let{data:d}=await aw.from("movements").select("product_id, created_at").eq("operator_id",D.id).eq("type","scarico").gte("created_at",b.toISOString()).order("created_at",{ascending:!1});if(d&&d.length>0){let b=new Set,e=[];for(let a of d)b.has(a.product_id)||(b.add(a.product_id),e.push(a.product_id));let f=new Map(a.data.map(a=>[a.id,a]));c=e.map(a=>f.get(a)).filter(a=>void 0!==a).slice(0,10)}}return P(c),{products:a.data,worksites:b.data,recentProducts:c}},aC=(a=M,$?a=M.filter(a=>a.category===$):"all"!==W&&(a=(0,g.filterProductsByType)(M,W)),a.filter(a=>a.name.toLowerCase().includes(U.toLowerCase())||a.barcode?.toLowerCase().includes(U.toLowerCase()))),aD=a=>{"all"===a?(X("all"),Z(null),_(null)):Y===a?(Z(null),_(null),X(a)):(X(a),Z(a),_(null))},aE=async()=>{if(aa&&ac&&D){aj(!0);try{let{data:a,error:b}=await aw.from("products").select("current_stock").eq("id",aa.id).single();if(b)throw b;if(a.current_stock<ae){alert(`Stock insufficiente! Disponibili solo ${a.current_stock} unit\xe0.`),ab({...aa,current_stock:a.current_stock}),af(Math.min(ae,a.current_stock)),aj(!1);return}let{error:c}=await aw.from("movements").insert({type:"scarico",product_id:aa.id,worksite_id:ac.id,quantity:ae,unit_cost_at_time:aa.unit_cost,operator_id:D.id,movement_date:ag});if(c)throw c;an({product:aa.name,quantity:ae,worksite:`${ac.code} ${ac.name}`,total:ae*aa.unit_cost}),al(!0),ab(null),af(1),ah(new Date().toISOString().split("T")[0]),V("")}catch(a){console.error("Error:",a),alert("Errore durante lo scarico")}finally{aj(!1)}}},aF=(0,c.useCallback)(a=>{let b=M.find(b=>b.barcode===a);b?(ab(b),aH()):(at(`Prodotto non trovato: ${a}`),setTimeout(()=>at(null),3e3))},[M]),aG=async()=>{ar(!0),at(null);try{let a=new Map;a.set(B.DecodeHintType.POSSIBLE_FORMATS,[A.BarcodeFormat.EAN_13,A.BarcodeFormat.EAN_8,A.BarcodeFormat.CODE_128,A.BarcodeFormat.CODE_39,A.BarcodeFormat.UPC_A,A.BarcodeFormat.UPC_E,A.BarcodeFormat.QR_CODE]);let b=new z.BrowserMultiFormatReader(a);av.current=b;let c=await b.listVideoInputDevices(),d=c[0]?.deviceId,e=c.find(a=>a.label.toLowerCase().includes("back")||a.label.toLowerCase().includes("rear")||a.label.toLowerCase().includes("environment"));if(e&&(d=e.deviceId),!d)throw Error("Nessuna fotocamera trovata");await b.decodeFromVideoDevice(d,au.current,(a,b)=>{if(a){let b=a.getText();console.log("Barcode detected:",b),aF(b)}})}catch(a){console.error("Scanner error:",a),at("Impossibile accedere alla fotocamera"),ar(!1)}},aH=(0,c.useCallback)(()=>{av.current&&(av.current.reset(),av.current=null),ar(!1),at(null)},[]);return G?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)(r.Loader2,{className:"w-8 h-8 text-orange-600 animate-spin"})}):F?(0,b.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,b.jsx)(s.ShieldAlert,{className:"w-8 h-8 text-red-600"})}),(0,b.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Accesso Negato"}),(0,b.jsx)("p",{className:"text-gray-500 mb-4",children:"Non hai i permessi per accedere ai movimenti."}),(0,b.jsx)("button",{onClick:()=>H.push("/"),className:"px-4 py-2 bg-blue-600 text-white rounded-xl font-medium",children:"Torna alla Home"})]}):S?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-orange-600 border-t-transparent rounded-full animate-spin"})}):ak&&am?(0,b.jsxs)("div",{className:"min-h-screen",children:[(0,b.jsx)("header",{className:"bg-gradient-to-r from-orange-500 via-orange-600 to-red-500 text-white px-4 pt-12 pb-6 rounded-b-3xl",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto flex items-center gap-3",children:[(0,b.jsx)(h.ArrowUpFromLine,{className:"w-6 h-6"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold",children:"Scarico Merce"}),(0,b.jsx)("p",{className:"text-orange-100 text-sm",children:"Operazione completata"})]})]})}),(0,b.jsx)("div",{className:"max-w-4xl mx-auto px-4 -mt-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-8 text-center",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(m.Check,{className:"w-10 h-10 text-emerald-600"})}),(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Scarico Registrato!"}),(0,b.jsxs)("p",{className:"text-gray-600 mb-4",children:[am.quantity,"x ",am.product,(0,b.jsx)("br",{}),"â†’ ",am.worksite]}),(0,b.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:(0,f.formatCurrency)(am.total)}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 mt-6",children:[(0,b.jsx)("button",{onClick:()=>{al(!1),an(null)},className:"inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl font-semibold text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 focus:ring-orange-500 shadow-md hover:shadow-lg active:scale-[0.98] w-full",children:"Nuovo Scarico"}),(0,b.jsx)("button",{onClick:()=>H.push("/movimenti"),className:"inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl font-semibold text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 border-2 border-gray-200 bg-white text-gray-700 hover:border-gray-300 hover:bg-gray-50 focus:ring-gray-500 w-full",children:"Vai a Movimenti"})]})]})})]}):aa?(0,b.jsxs)("div",{className:"min-h-screen",children:[(0,b.jsx)("header",{className:"bg-gradient-to-r from-orange-500 via-orange-600 to-red-500 text-white px-4 pt-12 pb-6 rounded-b-3xl",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto flex items-center gap-3",children:[(0,b.jsx)(h.ArrowUpFromLine,{className:"w-6 h-6"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold",children:"Scarico Merce"}),(0,b.jsx)("p",{className:"text-orange-100 text-sm truncate",children:aa.name})]})]})}),(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 -mt-4 space-y-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Prodotto Selezionato"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center text-2xl",children:"ðŸ§´"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:aa.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["Barcode: ",aa.barcode||"N/A"]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[aa.quantity_per_package," ",aa.unit," â€¢ ",(0,f.formatCurrency)(aa.unit_cost),"/pz"]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4",children:[(0,b.jsx)("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Data Movimento"}),(0,b.jsx)("input",{type:"date",value:ag,onChange:a=>ah(a.target.value),max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-center text-lg font-semibold"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-4",children:"QuantitÃ  da Scaricare"}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,b.jsx)("button",{onClick:()=>af(Math.max(1,ae-1)),className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl font-bold transition-all duration-200 active:scale-95 bg-red-100 text-red-600 hover:bg-red-200",children:(0,b.jsx)(k.Minus,{className:"w-6 h-6"})}),(0,b.jsx)("span",{className:"text-5xl font-bold text-gray-900 w-20 text-center",children:ae}),(0,b.jsx)("button",{onClick:()=>af(Math.min(aa.current_stock,ae+1)),className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl font-bold transition-all duration-200 active:scale-95 bg-emerald-100 text-emerald-600 hover:bg-emerald-200",children:(0,b.jsx)(l.Plus,{className:"w-6 h-6"})})]}),(0,b.jsx)("div",{className:"mt-4 text-center",children:(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["Disponibili: ",(0,b.jsx)("span",{className:"font-semibold",children:(0,f.formatNumber)(aa.current_stock,0)})," â€¢ Costo: ",(0,b.jsx)("span",{className:"font-semibold text-orange-600",children:(0,f.formatCurrency)(ae*aa.unit_cost)})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Cantiere destinazione *"}),(0,b.jsxs)("button",{onClick:()=>ap(!0),className:"w-full flex items-center justify-between p-3 border border-gray-200 rounded-xl",children:[ac?(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsxs)("p",{className:"font-semibold text-gray-900",children:[ac.code," - ",ac.name]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[ac.address,", ",ac.city]})]}):(0,b.jsx)("span",{className:"text-gray-400",children:"Seleziona cantiere..."}),(0,b.jsx)(o.ChevronDown,{className:"w-5 h-5 text-gray-400"})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,b.jsx)("button",{onClick:()=>{ab(null),af(1),ah(new Date().toISOString().split("T")[0])},className:"inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl font-semibold text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed border-2 border-gray-200 bg-white text-gray-700 hover:border-gray-300 hover:bg-gray-50 focus:ring-gray-500 flex-1",children:"Annulla"}),(0,b.jsx)("button",{onClick:aE,disabled:!ac||ai,className:"inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl font-semibold text-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 focus:ring-orange-500 shadow-md hover:shadow-lg active:scale-[0.98] flex-1",children:ai?(0,b.jsx)(r.Loader2,{className:"w-5 h-5 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Check,{className:"w-5 h-5"}),"Conferma"]})})]})]}),ao&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end",children:(0,b.jsxs)("div",{className:"bg-white w-full rounded-t-3xl p-4 max-h-[70vh] overflow-auto animate-slide-up",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold",children:"Seleziona Cantiere"}),(0,b.jsx)("button",{onClick:()=>ap(!1),children:(0,b.jsx)(n.X,{className:"w-6 h-6 text-gray-400"})})]}),(0,b.jsx)("div",{className:"space-y-2",children:Q.map(a=>(0,b.jsxs)("button",{onClick:()=>{ad(a),ap(!1)},className:(0,f.cn)("w-full p-4 rounded-xl text-left transition-all",ac?.id===a.id?"bg-orange-100 border-2 border-orange-500":"bg-gray-50 border-2 border-transparent"),children:[(0,b.jsxs)("p",{className:"font-semibold text-gray-900",children:[a.code," - ",a.name]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[a.address,", ",a.city]})]},a.id))})]})})]}):(0,b.jsxs)("div",{className:"min-h-screen",children:[(0,b.jsx)("header",{className:"bg-gradient-to-r from-orange-500 via-orange-600 to-red-500 text-white px-4 pt-12 pb-6 rounded-b-3xl",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto flex items-center gap-3",children:[(0,b.jsx)(x.default,{href:L?"/movimenti":"/",className:"p-2 -ml-2 hover:bg-white/10 rounded-xl transition-colors",children:(0,b.jsx)(q.ChevronLeft,{className:"w-5 h-5"})}),(0,b.jsx)(h.ArrowUpFromLine,{className:"w-6 h-6"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold",children:"Scarico Merce"}),(0,b.jsx)("p",{className:"text-orange-100 text-sm",children:"Scansiona o cerca prodotto"})]})]})}),(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 -mt-4 space-y-4",children:[!az&&(0,b.jsxs)("div",{className:(0,f.cn)("flex items-center gap-3 p-4 rounded-2xl border-2 transition-all",ax?"bg-emerald-50 border-emerald-500":"bg-orange-50 border-orange-200"),children:[(0,b.jsx)("div",{className:(0,f.cn)("w-10 h-10 rounded-xl flex items-center justify-center",ax?"bg-emerald-500 text-white":"bg-orange-500 text-white"),children:(0,b.jsx)(w.ScanBarcode,{className:"w-5 h-5"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:ax?"Barcode rilevato!":"Pistola barcode pronta"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:ax||"Scansiona un prodotto con la pistola USB"})]}),ax&&(0,b.jsx)(m.Check,{className:"w-6 h-6 text-emerald-500"})]}),az&&(aq?(0,b.jsxs)("div",{className:"relative h-48 bg-gray-900 rounded-2xl overflow-hidden",children:[(0,b.jsx)("video",{ref:au,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-32 h-32 border-2 border-cyan-400 rounded-xl relative",children:(0,b.jsx)("div",{className:"scanner-line"})})}),as&&(0,b.jsx)("div",{className:"absolute bottom-3 left-3 right-3 bg-red-500 text-white text-sm px-3 py-2 rounded-lg text-center",children:as}),(0,b.jsx)("button",{onClick:aH,className:"absolute top-3 right-3 w-8 h-8 bg-black/50 rounded-full flex items-center justify-center",children:(0,b.jsx)(n.X,{className:"w-4 h-4 text-white"})}),(0,b.jsx)("div",{className:"absolute top-3 left-3 bg-black/50 text-white text-xs px-2 py-1 rounded",children:"Inquadra il barcode"})]}):(0,b.jsxs)("button",{onClick:aG,className:"w-full h-32 bg-gray-800 rounded-2xl flex flex-col items-center justify-center gap-2 text-gray-400 hover:bg-gray-700 transition-colors",children:[(0,b.jsx)(i.Camera,{className:"w-8 h-8"}),(0,b.jsx)("span",{className:"text-sm",children:"Tocca per scansionare barcode"})]})),(0,b.jsxs)("div",{children:[az&&(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Oppure cerca manualmente"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(j.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Nome prodotto o barcode...",value:U,onChange:a=>V(a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent pl-12"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:()=>aD("all"),className:(0,f.cn)("flex items-center gap-1.5 px-3 py-2 rounded-xl text-sm font-medium transition-all","all"!==W||$?"bg-white text-gray-600 border border-gray-200":"bg-orange-100 text-orange-700 border border-orange-200"),children:[(0,b.jsx)(t.Package,{className:"w-4 h-4"}),"Tutti"]}),(0,b.jsxs)("button",{onClick:()=>aD("consumabile"),className:(0,f.cn)("flex items-center gap-1.5 px-3 py-2 rounded-xl text-sm font-medium transition-all","consumabile"===W?"bg-emerald-100 text-emerald-700 border border-emerald-200":"bg-white text-gray-600 border border-gray-200"),children:[(0,b.jsx)(u.Sparkles,{className:"w-4 h-4"}),"Pulizia","consumabile"===Y?(0,b.jsx)(p.ChevronUp,{className:"w-3 h-3 ml-1"}):(0,b.jsx)(o.ChevronDown,{className:"w-3 h-3 ml-1"})]}),(0,b.jsxs)("button",{onClick:()=>aD("attrezzatura"),className:(0,f.cn)("flex items-center gap-1.5 px-3 py-2 rounded-xl text-sm font-medium transition-all","attrezzatura"===W?"bg-violet-100 text-violet-700 border border-violet-200":"bg-white text-gray-600 border border-gray-200"),children:[(0,b.jsx)(v.Wrench,{className:"w-4 h-4"}),"Attrezz.","attrezzatura"===Y?(0,b.jsx)(p.ChevronUp,{className:"w-3 h-3 ml-1"}):(0,b.jsx)(o.ChevronDown,{className:"w-3 h-3 ml-1"})]})]}),Y&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2 animate-slide-up",children:g.CATEGORIES_BY_TYPE[Y].map(a=>(0,b.jsxs)("button",{onClick:()=>{$===a?_(null):_(a)},className:(0,f.cn)("flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium transition-all",$===a?"consumabile"===Y?"bg-emerald-500 text-white":"bg-violet-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,b.jsx)("span",{children:g.CATEGORY_ICONS[a]}),g.CATEGORY_LABELS[a]]},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2",children:U||"all"!==W?"Risultati":O.length>0?"Usati di recente":"Tutti i prodotti"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(U||"all"!==W?aC.slice(0,15):O.length>0?O:aC.slice(0,10)).map(a=>(0,b.jsxs)("button",{onClick:()=>ab(a),className:"flex items-center gap-4 p-4 bg-white rounded-2xl border border-gray-100 shadow-sm transition-all duration-200 hover:shadow-md hover:border-gray-200 w-full text-left",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl bg-orange-100",children:g.CATEGORY_ICONS[a.category]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-900 truncate",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[a.quantity_per_package,a.unit," â€¢ ",(0,f.formatCurrency)(a.unit_cost)]})]}),(0,b.jsx)("span",{className:(0,f.cn)("font-bold",a.current_stock<=a.min_stock?"text-red-500":"text-emerald-500"),children:(0,f.formatNumber)(a.current_stock,0)})]},a.id)),!U&&"all"===W&&O.length>0&&(0,b.jsx)("button",{onClick:()=>V(" "),className:"w-full p-3 text-center text-orange-600 font-medium text-sm hover:bg-orange-50 rounded-xl transition-colors",children:"Mostra tutti i prodotti â†’"})]})]})]})]})}function E(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-orange-600 border-t-transparent rounded-full animate-spin"})}),children:(0,b.jsx)(D,{})})}a.s(["default",()=>E])}];

//# sourceMappingURL=src_app_%28app%29_movimenti_scarico_page_tsx_ab6ba189._.js.map