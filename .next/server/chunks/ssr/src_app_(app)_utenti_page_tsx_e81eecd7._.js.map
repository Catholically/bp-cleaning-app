{"version":3,"sources":["../../../../src/app/%28app%29/utenti/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState, Suspense } from 'react'\r\nimport { useRouter, useSearchParams } from 'next/navigation'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport Link from 'next/link'\r\nimport { useAuth } from '@/components/providers/auth-provider'\r\nimport { Profile, UserRole, Worksite, UserWorksite } from '@/lib/types'\r\nimport {\r\n  Users,\r\n  Search,\r\n  X,\r\n  Shield,\r\n  User,\r\n  Edit,\r\n  ArrowLeft,\r\n  Save,\r\n  Loader2,\r\n  Mail,\r\n  Calendar,\r\n  Building2,\r\n  Plus,\r\n  Check,\r\n  Briefcase\r\n} from 'lucide-react'\r\nimport { formatDate } from '@/lib/utils'\r\n\r\nconst ROLE_CONFIG = {\r\n  superuser: {\r\n    label: 'Amministratore',\r\n    description: 'Accesso completo al sistema',\r\n    color: 'violet',\r\n    icon: Shield\r\n  },\r\n  manager: {\r\n    label: 'Data Manager',\r\n    description: 'Gestisce prodotti, fornitori e cantieri',\r\n    color: 'amber',\r\n    icon: Briefcase\r\n  },\r\n  user: {\r\n    label: 'Operatore',\r\n    description: 'Movimenti sui cantieri assegnati',\r\n    color: 'blue',\r\n    icon: User\r\n  }\r\n}\r\n\r\nfunction UtentiContent() {\r\n  const router = useRouter()\r\n  const searchParams = useSearchParams()\r\n  const { isSuperuser, profile: currentProfile } = useAuth()\r\n\r\n  const fromImpostazioni = searchParams.get('from') === 'impostazioni'\r\n  const backUrl = fromImpostazioni ? '/impostazioni' : '/'\r\n  const [profiles, setProfiles] = useState<Profile[]>([])\r\n  const [worksites, setWorksites] = useState<Worksite[]>([])\r\n  const [userWorksites, setUserWorksites] = useState<UserWorksite[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [searchQuery, setSearchQuery] = useState('')\r\n  const [showForm, setShowForm] = useState(false)\r\n  const [editingProfile, setEditingProfile] = useState<Profile | null>(null)\r\n  const [saving, setSaving] = useState(false)\r\n  const [activeTab, setActiveTab] = useState<'info' | 'cantieri'>('info')\r\n  const [selectedWorksites, setSelectedWorksites] = useState<string[]>([])\r\n  const [worksiteSearch, setWorksiteSearch] = useState('')\r\n  const supabase = createClient()\r\n\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    full_name: '',\r\n    role: 'user' as UserRole\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (!isSuperuser) {\r\n      router.push('/impostazioni')\r\n      return\r\n    }\r\n    fetchData()\r\n  }, [isSuperuser])\r\n\r\n  const fetchData = async () => {\r\n    const [profilesRes, worksitesRes, userWorksitesRes] = await Promise.all([\r\n      supabase.from('profiles').select('*').order('role').order('full_name'),\r\n      supabase.from('worksites').select('*').eq('status', 'active').order('name'),\r\n      supabase.from('user_worksites').select('*, worksite:worksites(*), user:profiles(*)')\r\n    ])\r\n\r\n    if (profilesRes.data) setProfiles(profilesRes.data)\r\n    if (worksitesRes.data) setWorksites(worksitesRes.data)\r\n    if (userWorksitesRes.data) setUserWorksites(userWorksitesRes.data)\r\n    setLoading(false)\r\n  }\r\n\r\n  const handleEdit = (profile: Profile) => {\r\n    setEditingProfile(profile)\r\n    setFormData({\r\n      email: profile.email,\r\n      full_name: profile.full_name,\r\n      role: profile.role\r\n    })\r\n    const assigned = userWorksites\r\n      .filter(uw => uw.user_id === profile.id)\r\n      .map(uw => uw.worksite_id)\r\n    setSelectedWorksites(assigned)\r\n    setActiveTab('info')\r\n    setShowForm(true)\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    if (!formData.full_name.trim() || !editingProfile) return\r\n\r\n    setSaving(true)\r\n\r\n    // Update profile\r\n    const { error: profileError } = await supabase\r\n      .from('profiles')\r\n      .update({\r\n        full_name: formData.full_name.trim(),\r\n        role: formData.role\r\n      })\r\n      .eq('id', editingProfile.id)\r\n\r\n    if (profileError) {\r\n      alert('Errore durante il salvataggio: ' + profileError.message)\r\n      setSaving(false)\r\n      return\r\n    }\r\n\r\n    // Update worksite assignments (only for user and manager roles)\r\n    if (formData.role !== 'superuser') {\r\n      // Delete existing assignments\r\n      await supabase\r\n        .from('user_worksites')\r\n        .delete()\r\n        .eq('user_id', editingProfile.id)\r\n\r\n      // Insert new assignments\r\n      if (selectedWorksites.length > 0) {\r\n        const assignments = selectedWorksites.map(wsId => ({\r\n          user_id: editingProfile.id,\r\n          worksite_id: wsId\r\n        }))\r\n        await supabase.from('user_worksites').insert(assignments)\r\n      }\r\n    }\r\n\r\n    setShowForm(false)\r\n    fetchData()\r\n    setSaving(false)\r\n  }\r\n\r\n  const toggleWorksite = (worksiteId: string) => {\r\n    setSelectedWorksites(prev =>\r\n      prev.includes(worksiteId)\r\n        ? prev.filter(id => id !== worksiteId)\r\n        : [...prev, worksiteId]\r\n    )\r\n  }\r\n\r\n  const getUserWorksiteCount = (userId: string) => {\r\n    return userWorksites.filter(uw => uw.user_id === userId).length\r\n  }\r\n\r\n  const filteredProfiles = profiles.filter(p => {\r\n    if (!searchQuery.trim()) return true\r\n    const query = searchQuery.toLowerCase()\r\n    return (\r\n      p.full_name.toLowerCase().includes(query) ||\r\n      p.email.toLowerCase().includes(query)\r\n    )\r\n  })\r\n\r\n  const filteredWorksites = worksites.filter(w => {\r\n    if (!worksiteSearch.trim()) return true\r\n    const query = worksiteSearch.toLowerCase()\r\n    return (\r\n      w.name.toLowerCase().includes(query) ||\r\n      w.code.toLowerCase().includes(query) ||\r\n      w.city?.toLowerCase().includes(query)\r\n    )\r\n  })\r\n\r\n  const superusers = filteredProfiles.filter(p => p.role === 'superuser')\r\n  const managers = filteredProfiles.filter(p => p.role === 'manager')\r\n  const users = filteredProfiles.filter(p => p.role === 'user')\r\n\r\n  if (!isSuperuser) return null\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Form view\r\n  if (showForm && editingProfile) {\r\n    const roleConfig = ROLE_CONFIG[formData.role]\r\n    const RoleIcon = roleConfig.icon\r\n\r\n    return (\r\n      <div className=\"min-h-screen pb-24\">\r\n        <header className=\"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-600 text-white px-4 pt-12 pb-6 rounded-b-3xl\">\r\n          <div className=\"max-w-4xl mx-auto\">\r\n          <div className=\"flex items-center gap-3 mb-4\">\r\n            <button\r\n              onClick={() => setShowForm(false)}\r\n              className=\"p-2 -ml-2 hover:bg-white/10 rounded-xl transition-colors\"\r\n            >\r\n              <ArrowLeft className=\"w-5 h-5\" />\r\n            </button>\r\n            <span className=\"text-blue-100\">Modifica Utente</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"w-14 h-14 rounded-2xl bg-white/20 flex items-center justify-center\">\r\n              <RoleIcon className=\"w-7 h-7\" />\r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold\">{formData.full_name || 'Modifica'}</h1>\r\n              <p className=\"text-blue-100 text-sm\">{formData.email}</p>\r\n            </div>\r\n          </div>\r\n          </div>\r\n        </header>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"max-w-4xl mx-auto px-4 -mt-4 mb-4\">\r\n          <div className=\"bg-white rounded-2xl border border-gray-100 shadow-sm p-1 flex\">\r\n            <button\r\n              onClick={() => setActiveTab('info')}\r\n              className={`flex-1 py-2.5 px-4 rounded-xl text-sm font-medium transition-colors ${\r\n                activeTab === 'info'\r\n                  ? 'bg-blue-600 text-white'\r\n                  : 'text-gray-600 hover:bg-gray-100'\r\n              }`}\r\n            >\r\n              Informazioni\r\n            </button>\r\n            {formData.role !== 'superuser' && (\r\n              <button\r\n                onClick={() => setActiveTab('cantieri')}\r\n                className={`flex-1 py-2.5 px-4 rounded-xl text-sm font-medium transition-colors flex items-center justify-center gap-2 ${\r\n                  activeTab === 'cantieri'\r\n                    ? 'bg-blue-600 text-white'\r\n                    : 'text-gray-600 hover:bg-gray-100'\r\n                }`}\r\n              >\r\n                Cantieri\r\n                {selectedWorksites.length > 0 && (\r\n                  <span className={`px-2 py-0.5 rounded-full text-xs ${\r\n                    activeTab === 'cantieri' ? 'bg-white/20' : 'bg-blue-100 text-blue-600'\r\n                  }`}>\r\n                    {selectedWorksites.length}\r\n                  </span>\r\n                )}\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"max-w-4xl mx-auto px-4 space-y-4\">\r\n          {activeTab === 'info' ? (\r\n            <>\r\n              <div className=\"bg-white rounded-2xl border border-gray-100 shadow-sm p-4\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Email (non modificabile)\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  value={formData.email}\r\n                  disabled\r\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 text-gray-500 bg-gray-50\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"bg-white rounded-2xl border border-gray-100 shadow-sm p-4\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Nome Completo *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.full_name}\r\n                  onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\r\n                  placeholder=\"Es. Mario Rossi\"\r\n                  className=\"w-full px-4 py-3 rounded-xl border border-gray-200 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              <div className=\"bg-white rounded-2xl border border-gray-100 shadow-sm p-4\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">\r\n                  Ruolo\r\n                </label>\r\n                <div className=\"space-y-2\">\r\n                  {(Object.entries(ROLE_CONFIG) as [UserRole, typeof ROLE_CONFIG.superuser][]).map(([role, config]) => {\r\n                    const Icon = config.icon\r\n                    const isDisabled = editingProfile.id === currentProfile?.id && role !== formData.role\r\n                    return (\r\n                      <label\r\n                        key={role}\r\n                        className={`flex items-center gap-3 p-3 rounded-xl border-2 cursor-pointer transition-all ${\r\n                          formData.role === role\r\n                            ? `border-${config.color}-500 bg-${config.color}-50`\r\n                            : 'border-gray-100 hover:border-gray-200'\r\n                        } ${isDisabled ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n                      >\r\n                        <input\r\n                          type=\"radio\"\r\n                          name=\"role\"\r\n                          value={role}\r\n                          checked={formData.role === role}\r\n                          onChange={(e) => setFormData({ ...formData, role: e.target.value as UserRole })}\r\n                          disabled={isDisabled}\r\n                          className=\"sr-only\"\r\n                        />\r\n                        <div className={`w-10 h-10 rounded-xl bg-${config.color}-100 flex items-center justify-center`}>\r\n                          <Icon className={`w-5 h-5 text-${config.color}-600`} />\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                          <p className=\"font-medium text-gray-900\">{config.label}</p>\r\n                          <p className=\"text-xs text-gray-500\">{config.description}</p>\r\n                        </div>\r\n                        {formData.role === role && (\r\n                          <div className={`w-6 h-6 rounded-full bg-${config.color}-500 flex items-center justify-center`}>\r\n                            <Check className=\"w-4 h-4 text-white\" />\r\n                          </div>\r\n                        )}\r\n                      </label>\r\n                    )\r\n                  })}\r\n                </div>\r\n                {editingProfile.id === currentProfile?.id && (\r\n                  <p className=\"text-xs text-gray-500 mt-3\">\r\n                    Non puoi modificare il tuo ruolo\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              {/* Worksite search */}\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Cerca cantiere...\"\r\n                  value={worksiteSearch}\r\n                  onChange={(e) => setWorksiteSearch(e.target.value)}\r\n                  className=\"w-full pl-10 pr-10 py-3 bg-white border border-gray-200 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n                {worksiteSearch && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setWorksiteSearch('')}\r\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-100 rounded-full\"\r\n                  >\r\n                    <X className=\"w-4 h-4 text-gray-400\" />\r\n                  </button>\r\n                )}\r\n              </div>\r\n\r\n              {/* Selected count */}\r\n              <div className=\"flex items-center justify-between px-1\">\r\n                <span className=\"text-sm text-gray-500\">\r\n                  {selectedWorksites.length} cantieri selezionati\r\n                </span>\r\n                {selectedWorksites.length > 0 && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setSelectedWorksites([])}\r\n                    className=\"text-sm text-red-600 font-medium\"\r\n                  >\r\n                    Rimuovi tutti\r\n                  </button>\r\n                )}\r\n              </div>\r\n\r\n              {/* Worksites list */}\r\n              <div className=\"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden max-h-96 overflow-y-auto\">\r\n                {filteredWorksites.length === 0 ? (\r\n                  <div className=\"p-6 text-center text-gray-500\">\r\n                    Nessun cantiere trovato\r\n                  </div>\r\n                ) : (\r\n                  filteredWorksites.map((worksite, index) => {\r\n                    const isSelected = selectedWorksites.includes(worksite.id)\r\n                    return (\r\n                      <button\r\n                        key={worksite.id}\r\n                        type=\"button\"\r\n                        onClick={() => toggleWorksite(worksite.id)}\r\n                        className={`w-full flex items-center gap-3 p-3 text-left transition-colors ${\r\n                          index !== filteredWorksites.length - 1 ? 'border-b border-gray-100' : ''\r\n                        } ${isSelected ? 'bg-blue-50' : 'hover:bg-gray-50'}`}\r\n                      >\r\n                        <div className={`w-10 h-10 rounded-xl flex items-center justify-center ${\r\n                          isSelected ? 'bg-blue-500' : 'bg-gray-100'\r\n                        }`}>\r\n                          {isSelected ? (\r\n                            <Check className=\"w-5 h-5 text-white\" />\r\n                          ) : (\r\n                            <Building2 className=\"w-5 h-5 text-gray-400\" />\r\n                          )}\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <p className=\"font-medium text-gray-900 truncate\">{worksite.name}</p>\r\n                          <p className=\"text-xs text-gray-500 truncate\">\r\n                            {worksite.code} • {worksite.city}\r\n                          </p>\r\n                        </div>\r\n                      </button>\r\n                    )\r\n                  })\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"bg-amber-50 rounded-2xl border border-amber-100 p-4\">\r\n                <p className=\"text-sm text-amber-800\">\r\n                  <strong>Nota:</strong> L'utente potrà accedere solo ai cantieri selezionati.\r\n                  {formData.role === 'user' && ' Gli operatori potranno registrare movimenti solo su questi cantieri.'}\r\n                  {formData.role === 'manager' && ' I manager potranno modificare solo questi cantieri.'}\r\n                </p>\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={saving || !formData.full_name.trim()}\r\n            className=\"w-full flex items-center justify-center gap-2 p-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-2xl font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            {saving ? (\r\n              <>\r\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                Salvataggio...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Save className=\"w-5 h-5\" />\r\n                Salva Modifiche\r\n              </>\r\n            )}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // List view\r\n  const renderUserCard = (profile: Profile, index: number, offsetIndex: number = 0) => {\r\n    const config = ROLE_CONFIG[profile.role]\r\n    const Icon = config.icon\r\n    const worksiteCount = getUserWorksiteCount(profile.id)\r\n\r\n    return (\r\n      <div\r\n        key={profile.id}\r\n        className=\"bg-white rounded-2xl border border-gray-100 shadow-sm p-4 animate-slide-up\"\r\n        style={{ animationDelay: `${(offsetIndex + index) * 0.05}s` }}\r\n      >\r\n        <div className=\"flex items-start justify-between\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className={`w-12 h-12 bg-${config.color}-100 rounded-full flex items-center justify-center`}>\r\n              <Icon className={`w-6 h-6 text-${config.color}-600`} />\r\n            </div>\r\n            <div>\r\n              <h3 className=\"font-semibold text-gray-900\">\r\n                {profile.full_name}\r\n                {profile.id === currentProfile?.id && (\r\n                  <span className=\"ml-2 text-xs text-violet-600\">(tu)</span>\r\n                )}\r\n              </h3>\r\n              <div className=\"flex items-center gap-1 text-sm text-gray-500\">\r\n                <Mail className=\"w-3 h-3\" />\r\n                {profile.email}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={() => handleEdit(profile)}\r\n            className=\"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-colors\"\r\n          >\r\n            <Edit className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n        <div className=\"flex items-center gap-4 mt-3 ml-15\">\r\n          <div className=\"flex items-center gap-1 text-xs text-gray-400\">\r\n            <Calendar className=\"w-3 h-3\" />\r\n            {formatDate(profile.created_at)}\r\n          </div>\r\n          {profile.role !== 'superuser' && (\r\n            <div className=\"flex items-center gap-1 text-xs text-gray-400\">\r\n              <Building2 className=\"w-3 h-3\" />\r\n              {worksiteCount} {worksiteCount === 1 ? 'cantiere' : 'cantieri'}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen\">\r\n      <header className=\"bg-gradient-to-r from-blue-500 via-blue-600 to-indigo-600 text-white px-4 pt-12 pb-6 rounded-b-3xl\">\r\n        <div className=\"max-w-4xl mx-auto\">\r\n        <div className=\"flex items-center gap-3 mb-4\">\r\n          <Link\r\n            href={backUrl}\r\n            className=\"p-2 -ml-2 hover:bg-white/10 rounded-xl transition-colors\"\r\n          >\r\n            <ArrowLeft className=\"w-5 h-5\" />\r\n          </Link>\r\n          <div>\r\n            <h1 className=\"text-xl font-bold\">Gestione Utenti</h1>\r\n            <p className=\"text-blue-100 text-sm\">{profiles.length} utenti registrati</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-blue-300\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Cerca utente...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"w-full pl-10 pr-10 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-blue-200 focus:outline-none focus:ring-2 focus:ring-white/30\"\r\n          />\r\n          {searchQuery && (\r\n            <button\r\n              onClick={() => setSearchQuery('')}\r\n              className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-white/10 rounded-full\"\r\n            >\r\n              <X className=\"w-4 h-4 text-blue-200\" />\r\n            </button>\r\n          )}\r\n        </div>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"max-w-4xl mx-auto px-4 space-y-4 pb-24 pt-4\">\r\n        {/* Superusers */}\r\n        {superusers.length > 0 && (\r\n          <div>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3 flex items-center gap-2\">\r\n              <Shield className=\"w-4 h-4\" />\r\n              Amministratori ({superusers.length})\r\n            </h3>\r\n            <div className=\"space-y-3\">\r\n              {superusers.map((profile, index) => renderUserCard(profile, index))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Managers */}\r\n        {managers.length > 0 && (\r\n          <div>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3 flex items-center gap-2\">\r\n              <Briefcase className=\"w-4 h-4\" />\r\n              Data Manager ({managers.length})\r\n            </h3>\r\n            <div className=\"space-y-3\">\r\n              {managers.map((profile, index) => renderUserCard(profile, index, superusers.length))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Regular users */}\r\n        {users.length > 0 && (\r\n          <div>\r\n            <h3 className=\"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3 flex items-center gap-2\">\r\n              <User className=\"w-4 h-4\" />\r\n              Operatori ({users.length})\r\n            </h3>\r\n            <div className=\"space-y-3\">\r\n              {users.map((profile, index) => renderUserCard(profile, index, superusers.length + managers.length))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {filteredProfiles.length === 0 && searchQuery && (\r\n          <div className=\"flex flex-col items-center justify-center py-12 px-4 text-center\">\r\n            <div className=\"w-16 h-16 rounded-2xl bg-gray-100 flex items-center justify-center mb-4 text-gray-400\">\r\n              <Search className=\"w-8 h-8\" />\r\n            </div>\r\n            <p className=\"text-lg font-semibold text-gray-900 mb-2\">Nessun risultato</p>\r\n            <p className=\"text-sm text-gray-500 max-w-sm\">\r\n              Nessun utente trovato per \"{searchQuery}\"\r\n            </p>\r\n            <button\r\n              onClick={() => setSearchQuery('')}\r\n              className=\"mt-4 text-blue-600 font-medium\"\r\n            >\r\n              Cancella ricerca\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Info box */}\r\n        <div className=\"bg-blue-50 rounded-2xl border border-blue-100 p-4 mt-6\">\r\n          <p className=\"text-sm text-blue-800 font-medium mb-2\">Ruoli disponibili</p>\r\n          <div className=\"space-y-2 text-xs text-blue-600\">\r\n            <p><strong>Amministratore</strong>: accesso completo a tutto il sistema</p>\r\n            <p><strong>Data Manager</strong>: gestisce prodotti, fornitori e cantieri (no report costi)</p>\r\n            <p><strong>Operatore</strong>: registra movimenti solo sui cantieri assegnati</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-gray-50 rounded-2xl border border-gray-100 p-4\">\r\n          <p className=\"text-sm text-gray-700 font-medium mb-1\">Come aggiungere nuovi utenti</p>\r\n          <p className=\"text-xs text-gray-500\">\r\n            Per aggiungere un nuovo utente, chiedigli di registrarsi tramite la pagina di login.\r\n            Dopo la registrazione, potrai modificare il suo ruolo e assegnargli i cantieri da qui.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default function UtentiPage() {\r\n  return (\r\n    <Suspense fallback={\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"w-8 h-8 text-blue-600 animate-spin\" />\r\n      </div>\r\n    }>\r\n      <UtentiContent />\r\n    </Suspense>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}