module.exports=[39726,a=>{"use strict";let b={detergente:"consumabile",sgrassatore:"consumabile",disinfettante:"consumabile",lucidante:"consumabile",deodorante:"consumabile",accessorio:"attrezzatura",attrezzatura:"attrezzatura",altro:"attrezzatura"};a.s(["CATEGORIES_BY_TYPE",0,{all:["detergente","sgrassatore","disinfettante","lucidante","deodorante","accessorio","attrezzatura","altro"],consumabile:["detergente","sgrassatore","disinfettante","lucidante","deodorante"],attrezzatura:["accessorio","attrezzatura","altro"]},"CATEGORY_ICONS",0,{detergente:"ðŸ§´",sgrassatore:"ðŸ’ª",disinfettante:"ðŸ§¹",lucidante:"âœ¨",deodorante:"ðŸŒ¸",accessorio:"ðŸ§¤",attrezzatura:"ðŸ› ï¸",altro:"ðŸ“¦"},"CATEGORY_LABELS",0,{detergente:"Detergente",sgrassatore:"Sgrassatore",disinfettante:"Disinfettante",lucidante:"Lucidante",deodorante:"Deodorante",accessorio:"Accessorio",attrezzatura:"Attrezzatura",altro:"Altro"},"STATUS_LABELS",0,{active:"Attivo",paused:"In pausa",completed:"Completato"},"UNIT_LABELS",0,{litri:"Litri",pezzi:"Pezzi",kg:"Kg",ml:"ml",rotoli:"Rotoli",confezioni:"Confezioni"},"filterProductsByType",0,(a,c)=>"all"===c?a:a.filter(a=>b[a.category]===c)])},13749,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],13749)},87532,a=>{"use strict";let b=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],87532)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},5784,67552,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>c],5784);let d=(0,b.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);a.s(["ChevronUp",()=>d],67552)},8406,79808,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);a.s(["Sparkles",()=>c],8406);let d=(0,b.default)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);a.s(["Wrench",()=>d],79808)},46007,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(95445),e=a.i(64696),f=a.i(68114),g=a.i(39726),h=a.i(87532),i=a.i(15618);let j=(0,a.i(70106).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var k=a.i(83497),l=a.i(8406),m=a.i(79808),n=a.i(5784),o=a.i(67552),p=a.i(13749),q=a.i(38246),r=a.i(50944);function s(){let{isSuperuser:a}=(0,e.useAuth)();(0,r.useRouter)();let s=(0,r.useSearchParams)(),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)("low"===s.get("filter")),[B,C]=(0,c.useState)("all"),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(null),H=(0,d.createClient)();(0,c.useEffect)(()=>{let a=!0;return(async()=>{try{await I()}finally{a&&w(!1)}})(),()=>{a=!1}},[]);let I=async()=>{let{data:a,error:b}=await H.from("products").select("*, supplier:suppliers(name)").eq("is_active",!0).order("category").order("name");!b&&a&&u(a)},J=(0,c.useMemo)(()=>{let a=t;return F?a=t.filter(a=>a.category===F):"all"!==B&&(a=(0,g.filterProductsByType)(t,B)),a.filter(a=>{let b=!x||a.name.toLowerCase().includes(x.toLowerCase())||a.barcode?.toLowerCase().includes(x.toLowerCase()),c=!z||a.current_stock<=a.min_stock;return b&&c})},[t,x,z,B,F]),K=a=>{"all"===a?(C("all"),E(null),G(null)):D===a?(E(null),G(null),C(a)):(C(a),E(a),G(null))};return v?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):(0,b.jsxs)("div",{className:"min-h-screen",children:[(0,b.jsx)("header",{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 text-white px-4 pt-12 pb-6 rounded-b-3xl",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto flex items-center gap-3",children:[(0,b.jsx)(q.default,{href:"/",className:"p-2 -ml-2 hover:bg-white/10 rounded-xl transition-colors",children:(0,b.jsx)(p.ChevronLeft,{className:"w-5 h-5"})}),(0,b.jsx)(k.Package,{className:"w-6 h-6"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-bold",children:"Prodotti"}),(0,b.jsxs)("p",{className:"text-blue-100 text-sm",children:[t.length," prodotti in magazzino"]})]})]})}),(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 -mt-4 space-y-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(h.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Cerca prodotto...",value:x,onChange:a=>y(a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 bg-white text-gray-900 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent pl-12"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:()=>K("all"),className:(0,f.cn)("flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all","all"!==B||F?"bg-white text-gray-600 border border-gray-200":"bg-blue-100 text-blue-700 border border-blue-200"),children:[(0,b.jsx)(k.Package,{className:"w-4 h-4"}),"Tutti"]}),(0,b.jsxs)("button",{onClick:()=>K("consumabile"),className:(0,f.cn)("flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all","consumabile"===B?"bg-emerald-100 text-emerald-700 border border-emerald-200":"bg-white text-gray-600 border border-gray-200"),children:[(0,b.jsx)(l.Sparkles,{className:"w-4 h-4"}),"Pulizia","consumabile"===D?(0,b.jsx)(o.ChevronUp,{className:"w-3 h-3 ml-1"}):(0,b.jsx)(n.ChevronDown,{className:"w-3 h-3 ml-1"})]}),(0,b.jsxs)("button",{onClick:()=>K("attrezzatura"),className:(0,f.cn)("flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all","attrezzatura"===B?"bg-amber-100 text-amber-700 border border-amber-200":"bg-white text-gray-600 border border-gray-200"),children:[(0,b.jsx)(m.Wrench,{className:"w-4 h-4"}),"Attrezz.","attrezzatura"===D?(0,b.jsx)(o.ChevronUp,{className:"w-3 h-3 ml-1"}):(0,b.jsx)(n.ChevronDown,{className:"w-3 h-3 ml-1"})]})]}),D&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2 animate-slide-up",children:g.CATEGORIES_BY_TYPE[D].map(a=>(0,b.jsxs)("button",{onClick:()=>{F===a?G(null):G(a)},className:(0,f.cn)("flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium transition-all",F===a?"consumabile"===D?"bg-emerald-500 text-white":"bg-amber-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,b.jsx)("span",{children:g.CATEGORY_ICONS[a]}),g.CATEGORY_LABELS[a]]},a))})]}),(0,b.jsxs)("button",{onClick:()=>A(!z),className:(0,f.cn)("flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all",z?"bg-red-100 text-red-700 border border-red-200":"bg-white text-gray-600 border border-gray-200"),children:[(0,b.jsx)(j,{className:"w-4 h-4"}),"Solo scorte basse"]})]}),(0,b.jsx)("div",{className:"max-w-4xl mx-auto px-4 mt-4 space-y-3 pb-6",children:0===J.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gray-100 flex items-center justify-center mb-4 text-gray-400",children:(0,b.jsx)(k.Package,{className:"w-8 h-8"})}),(0,b.jsx)("p",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nessun prodotto trovato"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 max-w-sm",children:x?"Prova con una ricerca diversa":"Aggiungi il primo prodotto"})]}):J.map((a,c)=>{let d,e=(d=a.current_stock/a.min_stock)<=1?{color:"text-red-500",bg:"bg-red-50",label:"RIORDINO"}:d<=1.5?{color:"text-amber-500",bg:"bg-amber-50",label:"BASSO"}:{color:"text-emerald-500",bg:"bg-emerald-50",label:"OK"};return(0,b.jsxs)(q.default,{href:`/prodotti/${a.id}`,className:"flex items-center gap-4 p-4 bg-white rounded-2xl border border-gray-100 shadow-sm transition-all duration-200 hover:shadow-md hover:border-gray-200 animate-slide-up",style:{animationDelay:`${.03*c}s`},children:[(0,b.jsx)("div",{className:(0,f.cn)("list-item-icon",e.bg),children:(0,b.jsx)("span",{className:"text-xl",children:g.CATEGORY_ICONS[a.category]})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[a.quantity_per_package,a.unit," â€¢ ",(0,f.formatCurrency)(a.unit_cost)]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:(0,f.cn)("text-lg font-bold",e.color),children:(0,f.formatNumber)(a.current_stock,0)}),a.current_stock<=a.min_stock?(0,b.jsx)("span",{className:"badge-danger text-[10px]",children:e.label}):(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"in stock"})]})]},a.id)})}),a&&(0,b.jsx)(q.default,{href:"/prodotti/nuovo",className:"fixed bottom-24 right-4 w-14 h-14 rounded-full bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-xl flex items-center justify-center z-50 hover:from-blue-700 hover:to-blue-800 active:scale-95 transition-all duration-200",children:(0,b.jsx)(i.Plus,{className:"w-6 h-6"})})]})}function t(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}),children:(0,b.jsx)(s,{})})}a.s(["default",()=>t],46007)}];

//# sourceMappingURL=_8c5ced96._.js.map